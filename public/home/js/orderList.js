!function(e){function t(i){if(a[i])return a[i].exports;var r=a[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){a(2),a(3),MI.orderList=function(e){function t(e,t){if(e&&t){var a=e.lastIndexOf("."),i=e.slice(a),r=e.slice(0,a);return r+"!"+t+"x"+t+i}}function i(){function t(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=location.hash.substr(1).match(t);return null!==a?decodeURI(a[2]):null}function i(t){var a,i,r,n,s;if(t){if(c.orderType===c.rechargeType?(i=t.rechargeData,a=doT.template(c.rechargeTemplate)):(i=t.orderData,a=doT.template(c.orderTemplate)),t.ext_data&&t.ext_data.is_vfu&&0!==t.ext_data.is_vfu&&e("#J_orderNavList").find("> li").eq(0).after('<li><a href="'+t.ext_data.vfu_link+'">'+t.ext_data.vfu_link_title+(t.ext_data.vfu_num>0?' <span class="fuser-num">'+t.ext_data.vfu_num+"</span>":"")+"</a></li>"),t.isCompanyBuyUser?e("#J_qiyeNavList").show():e("#J_qiyeNavList").hide(),t.ext.unpaid_count&&e("#J_unpaidTab").text("待支付（"+t.ext.unpaid_count+"）"),t.ext.send_count&&e("#J_sendTab").text("待收货（"+t.ext.send_count+"）"),i.length<=0)return u.html('<p class="empty">当前没有'+t.typeTitle+"。</p>"),void f.empty();r='<ul class="order-list">'+a(i)+"</ul>",u.html(r),o(t.total_pages,t.current_page),n=[],s=e(".J_deliveryTrigger"),s.length&&(s.on("click",function(t){var a=e(this).attr("data-deliver-id");t.preventDefault(),e(this).data("hasResult")||(e(this).data("hasResult",!0),e('[data-deliver-list="'+a+'"]').closest(".order-delivery").removeClass("hide"),MI.orderUtil.getDeliverInfo(a))}).filter(function(e){return 3>e}).each(function(){var t=e(this).attr("data-deliver-id");e('[data-deliver-list="'+t+'"]').closest(".order-delivery").removeClass("hide"),n.push(t)}),MI.orderUtil.getDeliverInfo(n)),e(".J_deliverDesc").off(".beta").on("mouseenter.beta",".beta",function(){var t=e(this).offset(),a=e(this).width(),i=e("#J_deliverBeta"),r=i.outerWidth();i.removeClass("hide").css({top:t.top+25,left:t.left-r/2+a/2}),window.betaTimer&&clearTimeout(window.betaTimer)}).on("mouseleave.beta",".beta",function(){window.betaTimer=setTimeout(function(){e("#J_deliverBeta").addClass("hide")},1e3)}),e("#J_deliverBeta").off(".beta").on("mouseenter.beta",function(){window.betaTimer&&clearTimeout(window.betaTimer)}).on("mouseleave.beta",function(){window.betaTimer=setTimeout(function(){e("#J_deliverBeta").addClass("hide")},500)})}}function n(t){var a,r,n,o=e.cookie("xm_order_btauth")||"",s=c.orderList;a={type:"0",page:1,keywords:""},r=e.extend({},a,h,t),r.type!==c.rechargeType?n={type:r.type,page:r.page,bts:o,keywords:r.keywords}:(s=c.rechargeList,n={page:r.page,bts:o}),e.ajax({url:s,data:n,dataType:"jsonp",jsonp:"jsonpcallback",timeout:1e4,beforeSend:function(){u.html('<div class="loading"><div class="loader"></div></div>'),"12"===r.type&&f.empty()},success:function(e){1===e.code?i(e.data):-2===e.code&&(location.href=c.login)}})}function o(t,a){r(f,t,a,null),f.find("a.numbers").off(".pager").on("click.pager",function(t){t.preventDefault(),h.page=parseInt(e(this).attr("data-pager")),s(),n(),e("body, html").animate({scrollTop:0},500)})}function s(){var e="#type="+h.type;h.page&&h.page>1&&(e+="&page="+h.page),h.keywords&&(e+="&keywords="+h.keywords),location.hash=e}function d(){p.removeClass("active").find('[data-type="'+h.type+'"]').closest("li").addClass("active"),v.val(""),h.keywords="",h.page=1,s(),n()}function l(){var e=location.href.split("?")[0],t=location.href.split("?")[1];location.href=e+"#"+t}var c={orderList:MI.GLOBAL_CONFIG.orderSite+"/api/getOrderList.php",rechargeList:MI.GLOBAL_CONFIG.orderSite+"/api/getRechargeList.php",login:MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href,orderTemplate:e("#J_orderTemplate").html(),rechargeTemplate:e("#J_rechargeTemplate").html(),rechargeType:"recharge"},p=e(".J_orderType").find("> li"),u=e("#J_orderList"),f=e("#J_orderListPages"),m=e("#J_orderSearchForm"),v=e("#J_orderSearchKeywords"),h={},y=a(6);return-1!==location.href.indexOf("?type")?void l():(h.type=t("type")||"0",h.page=parseInt(t("page"))||1,h.keywords=t("keywords")||"","12"===h.type&&""!==h.keywords?(v.val(h.keywords),p.removeClass("active"),n()):h.type&&p.find('[data-type="'+h.type+'"]').length?(p.removeClass("active").find('[data-type="'+h.type+'"]').closest("li").addClass("active"),n()):("0"===h.type||"2"===h.type?p.find('[data-type="0"]').closest("li").addClass("active"):e(".J_navList").find("li").removeClass("active").filter(function(){return e(this).attr("data-type")===h.type}).addClass("active"),n()),m.on("submit",function(t){t.preventDefault(),p.removeClass("active"),h.type=12,h.page=1,h.keywords=e.trim(v.val()),s(),n()}),p.on("click","a",function(t){t.preventDefault(),h.type=parseInt(e(this).attr("data-type")),d()}),y(),void e("body").on("click",".J_reminder",function(){var t=e(this).data("id"),a=e(this);e.ajax({url:MI.GLOBAL_CONFIG.orderSite+"/order/urge?order_id="+t+"&_"+Math.random(),timeout:5e3,dataType:"jsonp",jsonp:"jsonpcallback",success:function(e){1===e.code?(MI.alert({msg:"很抱歉，让您久等了<br /><p>您的提醒已收到，我们将尽快发货</p>"}),a.addClass("btn-disabled").removeClass("J_reminder").text("已催单")):MI.alert({msg:e.msg||"催单失败，请稍后再试"})}})}))}var r=a(5);return{formatImageUrl:t,init:i}}(jQuery),jQuery(function(){MI.orderList.init()})},function(e,t){MI.namespace("orderUtil"),MI.orderUtil.getDeliverInfo=function(e){function t(e,t){for(var a=$('[data-deliver-list="'+e+'"]'),i="",r=0,n=t.length;n>r;r+=1){var o="";0===r?o=' class="first"':r===n-1&&(o=' class="last"'),i+="<li"+o+">"+t[r].context+" "+t[r].time+"</li>"}a.html(i)}function a(e){var t=$('[data-deliver-list="'+e+'"]');t.html('<li class="empty">暂无物流信息。</li>')}e&&$.ajax({url:"//cn.express.mi.com/express/query",data:{deliver_ids:$.isArray(e)?e.join(","):e,bts:$.cookie("xm_order_btauth")||""},dataType:"jsonp",jsonp:"jsonpcallback",success:function(i){if(1===i.code)for(var r in i.data)i.data.hasOwnProperty(r)&&i.data[r].length>0?t(r,i.data[r]):a(r);else if($.isArray(e))for(var n=0,o=e.length;o>n;n+=1)a(e[n]);else a(e)}})}},function(e,t,a){MI.alert=function(e){var t,i,r={msg:"温馨提示",isConfirm:!1,onCancel:$.noop,onConfirm:$.noop},n=$.extend(r,e),o=a(4),s=$("#J_miAlert");n.msg&&(s.length||($("body").append(o),s=$("#J_miAlert")),t=s.find("#J_miAlertCancel"),i=s.find("#J_miAlertConfirm"),n.isConfirm?("function"==typeof n.onCancel&&t.on("click",n.onCancel),"function"==typeof n.onConfirm&&i.on("click",n.onConfirm)):t.remove(),s.find("#J_miAlertMsg").html(n.msg),s.modal("show"))}},function(e,t){e.exports=function(e){var t='<div class="modal fade modal-hide  modal-alert" id="J_miAlert" > <a class="close" data-dismiss="modal"  href="javascript: void(0);"><i class="iconfont">&#xe602;</i></a> <div class="modal-bd"> <div class="text"> <h3 id="J_miAlertMsg"></h3> </div> <div class="actions"> <button class="btn btn-gray" data-dismiss="modal" id="J_miAlertCancel">取消</button> <button class="btn btn-primary"  data-dismiss="modal" id="J_miAlertConfirm">确定</button> </div> </div></div>';return t}},function(e,t){function a(){return multiline(function(){/*!@tpl
	<div class="xm-pagenavi">
	  {{?it.pre}}
	  <a href="{{=it.opt.linkprefix}}{{=it.pre}}" class="numbers first"
	    data-pager="{{=it.pre}}"><span class="iconfont">&#xe629;</span></a>
	  {{??}}
	  <span class="numbers first"><span class="iconfont">&#xe629;</span></span>
	  {{?}}

	  {{?it.isF&&it.index==1}}
	  <span class="numbers current">1</span>
	  {{??it.isF&&it.index!=1}}
	  <a href="{{=it.opt.linkprefix}}1" class="numbers" data-pager="1">1</a>
	  {{?}}

	  {{?it.startXu}}
	  <span class="numbers">..</span>
	  {{?}}

	  {{for(var i=it.start;i<=it.end;i++){ }}
	  {{?i==it.index}}<span class="numbers current">{{=i}}</span>{{??}}
	  <a href="{{=it.opt.linkprefix}}{{=i}}" class="numbers" data-pager="{{=i}}">{{=i}}</a>{{?}}
	  {{ } }}

	  {{?it.endXu}}<span class="numbers">…</span>{{?}}

	  {{?it.isF&&it.index==it.pageAmount}}
	  <span class="numbers current">{{=it.pageAmount}}</span>
	  {{??it.isF&&it.index!=it.pageAmount}}
	  <a href="{{=it.opt.linkprefix}}{{=it.pageAmount}}" class="numbers"
	    data-pager="{{=it.pageAmount}}">{{=it.pageAmount}}</a>
	  {{?}}

	  {{?it.next}}
	  <a href="{{=it.opt.linkprefix}}{{=it.next}}" class="numbers last"
	    data-pager="{{=it.next}}"><span class='iconfont'>&#xe624;</span></a>{{??}}
	  <span class="numbers last"><span class='iconfont'>&#xe624;</span></span>
	  {{?}}
	</div>
	  */
console.log()})}var i=function(e,t,i,r){var n={};i||(i=1);var o={linkprefix:"#"};n.opt=$.extend({},o,r),n.index=i,n.start=1,n.end=t,n.pageAmount=t,n.endXu=!1,n.pre="",n.next=n.index+1,n.startXu=!1,n.isF=!1,1===i?(n.pre="",n.next=1===t?"":i+1):i===t?(n.next="",n.pre=1===t?"":i-1):(n.pre=i-1,n.next=i+1),8>t?(n.start=1,n.end=t):(n.isF=!0,5>i?(n.start=2,n.end=5,n.startXu=!1,n.endXu=!0):i>t-5?(n.start=t-5,n.end=t-1,n.startXu=!0,n.endXu=!1):(n.start=i-2,n.end=i+2,n.end>t-1&&(n.end=t-1),n.startXu=!0,n.endXu=!0));var s=a(),d=doT.template(s),l=d(n);e.html(l)};e.exports=i},function(e,t,a){e.exports=function(){var e=a(7);$("body").append(e()).on("click",".J_modalWaterInstall",function(e){e.preventDefault(),$("#waterInstall").modal("show")})}},function(e,t){e.exports=function(e){var t='<div id="waterInstall" class="modal fade in modal-hide modal-water-install"> <div class="modal-header"> <h3>预约小米净水器或水龙头安装服务</h3> <span class="close" data-dismiss="modal"><i class="iconfont">&#xe602;</i></span> </div> <div class="modal-body"> <h4>购买须知：</h4> <ol class="icon-list clearfix"> <li>本服务采用线上预约，安装时工作人员采取上门收费的服务形式。</li> <li>确认预约之后，工作人员将在商品（小米净水器）出库后（订单可查询）的3个工作日内，与您取得联系并上门安装。</li> <li>同一次上门安装小米净水器和不锈钢无铅水龙头，只收取一次安装人工费用（50元/台）。</li> <li>往返距离大于30公里的上门服务属于远程服务,对超出30公里的路程部分收取远程费,收费标准为1元/公里。</li> </ol> <p> <a href="http://bbs.xiaomi.cn/t-11515570" target="_blank">了解更多细则 &raquo;</a> </p> <table> <caption> 收费标准： </caption> <thead> <tr> <th> 项目名称 </th> <th> 安装人工费用 </th> <th> 材料费用 </th> </tr> </thead> <tbody> <tr> <td> 安装小米净水器 </td> <td> 50元/台 </td> <td> －－ </td> </tr> <tr> <td> 安装不锈钢无铅水龙头 </td> <td> 50元/台 </td> <td> 240元 </td> </tr> </tbody> </table> <p>温馨提示：如果您无需更换水龙头，自己动手就可以完成净水器安装哦。<a href="//www.mi.com/water/gallery/" target="_blank">参考安装演示 &raquo;</a></p> </div> <div class="modal-footer clearfix"> <a class="btn btn-primary" href="//www.mi.com/service/contact" target="_blank">联系客服预约</a> </div></div>';return t}}]);