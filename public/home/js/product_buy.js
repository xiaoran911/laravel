!function(e){function t(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return e[a].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){i(3),window.marked=i(4),i(5),i(6),i(8),i(11),i(13),i(14);var a=i(15),s=i(16),n=i(2),o=i(17),r=i(18),d=i(19),l=i(22);$.productBuy=function(e){var t={pid:e.id,product:"",parts:[],install:[],stockData:[],presalesData:[],hdinfoData:[],hdinfoBookingData:[],hdinfoPresalesData:[],orderData:{},bigtapDataId:[],bigtapDataType:[],stockDataId:[],orderDataId:[],presalesDataId:[],chooseResult:{},selectedAddr:[],services:{},mitvMember:null,allGoods:[],sortData:[],coupon:!1,saltTitle:"",afterSale:null,address:!1,defaultOnce:!0,isAllBooking:!0,goodsStock:0,mihomeId:"",selectStockInit:!1,selected:[],btnTxt:{bigtap:"加入购物车",presales:"加入购物车",booking:"立即预订",subscribe:"立即预约",reserve:"立即预约"},bigTagJson:{bigtap:{0:"hdinfoData",1:"stockData"},presales:{0:"hdinfoPresalesData",1:"presalesData"},booking:{0:"hdinfoBookingData",1:"presalesData"}}},c={config:$.extend(s,e),selectService:function(){var e=this,i=$(".J_service").find("li");i.on("click",function(){var i=$(this).data("id"),a=$(this).parents(".J_service"),s=a.find("li"),n=a.data("index"),o=a.data("multi");$(this).hasClass("active")?($(this).removeClass("active"),delete t.services[n][i],$.isEmptyObject(t.services[n])&&delete t.services[n]):(o?t.services.hasOwnProperty(n)||(t.services[n]={}):(s.removeClass("active"),t.services[n]={}),$(this).addClass("active"),t.services[n][i]={id:i,bargain_id:$(this).data("bargain_id"),name:$(this).data("name"),oriprice:$(this).data("oriprice"),price:$(this).data("price"),source:$(this).data("source")}),e.formateProList()}),i.find(".agreement a").on("click",function(e){e.stopPropagation()})},formateProList:function(){if(t.parts.length||t.install.length||!$.isEmptyObject(t.services)||""!==t.product){var e=i(25);$("#J_proList").removeClass("hide").html(e(t))}else $("#J_proList").addClass("hide")},selectList:function(e,i){var a=this,s=e.find("li"),n=s.find("a"),o=e.find(".J_listDescBox"),r=e.find(".J_listTips"),d=o.find(".J_listNum"),l={},c={},p={},h=function(){var e="",t=0,i=0;for(var a in l)(""!==l[a]||0===l[a])&&(e+=l[a]+"、",t+=parseFloat(c[a]),i+=parseFloat(p[a]));e=e.substring(0,e.length-1),o.find(".desc").html(e).end().find(".price").addClass(i===t?"":"del").html((i===t?"":"<del>"+i+"元</del>")+t+"元 ")},u=function(e,t){e.find(".img").attr("src",t.data("img")).end().find(".name").html(t.data("name")).end().find(".price").find("em").html(t.data("price")),e.find(".price").find("del").html(parseFloat(t.data("price"))<parseFloat(t.data("originalprice"))?t.data("originalprice"):"")},g=function(e){1===e?(o.addClass("hide"),r.removeClass("hide")):(o.removeClass("hide"),r.addClass("hide"))},f=function(e,t){var i=[],a=$(t).data("id"),s=$(t).parents("li").index();return $.each(e,function(e,t){t.id!==a&&t.index!==s&&i.push(t)}),i},m=function(e,a){l[e]=a.data("name"),c[e]=a.data("price"),p[e]=a.data("originalprice"),t[i].push({index:a.parents("li").index(),item:a.index(),id:a.data("id"),is_bargain:a.data("is_bargain")||!1,bargain_id:a.data("bargain_id")||"",name:l[e],price:c[e]})};n.on("click",function(){if(!$(this).hasClass("active")){var e=$(this).parents("li");$(this).addClass("active").siblings("a").removeClass("active"),u(e,$(this)),e.hasClass("active")&&(t[i]=f(t[i],e.find(".active")),m(e.index(),$(this)),a.formateProList(),h())}});var v=s.find("i");v.on("click",function(){var e=$(this).parents("li"),s=e.index();e.hasClass("active")?(e.removeClass("active"),l[s]="",c[s]=0,p[s]=0,t[i]=f(t[i],e.find(".active")),u(e,e.find("a").eq(0)),e.siblings("li").hasClass("active")?d.html(parseFloat(d.html())-1):(d.html("0"),g(1))):(e.addClass("active"),d.html(parseFloat(d.html())+1),g(),m(s,e.find(".active"))),h(),a.formateProList()});var _=e.find(".J_extend"),b=e.find("ul");_.on("click",function(){b.toggleClass("hide"),_.hasClass("active")?(_.removeClass("active").html("&#xe61b;"),0===parseFloat(d.html())&&(o.addClass("hide"),r.removeClass("hide"))):(_.addClass("active").html("&#xe612;"),0===parseFloat(d.html())?(o.addClass("hide"),r.removeClass("hide")):(o.removeClass("hide"),r.addClass("hide")))}),e.find(".J_listDelete").on("click",function(){g(1);for(var e=0,n=s.length;n>e;e++)s.eq(e).removeClass("active").find("i").removeClass("active");t[i]=[],l={},d.html(0),a.formateProList()})},formateNum:function(e,t){return(10>e?"0"+e:e)+(t?t:"")},buyCountDown:function(e){var t,i,a,s,n=this;clearInterval(n.msTimer),t=Math.floor(e%60),i=Math.floor(e/60%60),a=Math.floor(e/3600%24),s=Math.floor(e/86400)>0?Math.floor(e/86400):"";var o=10;n.msTimer=setInterval(function(){o-=1,$(".J_timer").find("span").html(n.formateNum(i)+":"+n.formateNum(t)+"  "+o)},100)},countDown:function(){if(!("booking"!==t.type||t.hdstarttime&&t.hdendtime))return void this.setBookingTimeup();var e=this;$.miCountdown({startTime:t.hdstarttime,endTime:t.hdendtime,onTime:function(i){i>3600||(0===$(".countdown").find(".J_timer").length&&$(".countdown").html('<a href="javascript:void(0);" class="btn btn-primary btn-biglarge J_timer" data-type="'+t.type+'" data-name="'+$(".countdown").data("name")+'">距开售仅剩 <span ></span></a>'),window.now=i,e.buyCountDown(i))},onStart:function(){e.changeBuy()},onEnd:function(){e.changeBuy("end")}})},changeBuy:function(e){$(".J_timer").removeClass("J_timer"),clearInterval(this.msTimer),"end"===e?this.setBtn():this.setBtn(this.config.isLogin?1:-1)},setBookingTimeup:function(){$(".J_bookTime").html("预售已结束"),this.setBtn()},getTime:function(){var e=this,i=0,a=0;"booking"===t.type?(i=t.bookStarttime,a=t.bookEndtime):("subscribe"===t.type||"reserve"===t.type)&&(i=parseInt((new Date).getTime()/1e3),a=t.subscribe.subscribe_end_time,l({_config:t}).getCount()),$.miCountdown({startTime:i,endTime:a,upTime:!0,onStart:function(t){e.countTime(t)},onEnd:function(){"booking"===t.type&&e.setBookingTimeup(),("subscribe"===t.type||"reserve"===t.type)&&($(".J_orderTime").html("预约已结束"),$(".J_proBuyBtn").addClass("btn-disabled").removeClass("J_proBuyBtn").html(t.subscribe.end_button_title))}})},countTime:function(e){var i=Math.floor(e%60),a=Math.floor(e/60%60),s=Math.floor(e/3600%24),n=Math.floor(e/86400)>0?Math.floor(e/86400):"";10>s&&(s="0"+s),10>a&&(a="0"+a),10>i&&(i="0"+i),n=n>0?n+" 天 ":"";var o="剩 "+n+s+" 时 "+a+" 分 "+i+" 秒";"booking"===t.type&&$(".J_bookTime").html(o),("subscribe"===t.type||"reserve"===t.type)&&$(".J_orderTime").html(o)},formatBookTime:function(e){function t(e,t){return(10>e?"0"+e:e)+t}var i=new Date(1e3*parseInt(e)),a=i.getFullYear()+"年",s=t(i.getMonth()+1,"月"),n=t(i.getDate(),"日 "),o=t(i.getHours(),":"),r=t(i.getMinutes(),"");return a+s+n+o+r},hideLoadNotic:function(){var e=this;$(".J_proLoginClose").on("click",function(){e.config.elm.find(".J_notic").slideUp("fast","linear"),e.config.isLoginClose=!0})},loopGoods:function(e,s,n,r){function d(){t.orderDataId.length>0&&a.ajax({url:l.config.orderDatacheck+"?goods_id_list="+t.orderDataId.join(",")+"&appointment_batch="+t.subscribe.batch_key+"&is_limit_some_sku="+t.subscribe.is_limit_some_sku,callback:function(e){if(1===e.code&&e.data&&e.data.list)if(t.orderData=e.data.list,t.subscribe.is_limit_some_sku)t.orderData[t.id]&&l.setBtn(3);else for(var i in t.orderData)if(t.orderData[i]){l.setBtn(3);break}}})}var l=this,c=t.selected[e],p=[];if($.each(t.allGoods,function(t,i){if(parseFloat(i.level)===e+1){var a=!1;$.each(s,function(e,t){t.hasChild=!1,(i.name===t.value||t.name===i.name)&&(a=!0,i.name===t.value&&(t.isExist=!0,t.child=i.child),p.push(t))}),a||(s.push(i),p.push(i))}}),""!==c.val){var h=!1;$.each(s,function(e,t){t.value===c.val&&(c.index=e,h=!0)}),h||(0===r?(c.index="",c.val=""):(c.index=0,c.val=s[c.index].value))}else 0===r?(c.index="",c.val=""):(c.index=c.index,c.val=s[c.index].value);$.each(p,function(i,a){if(a.list){var s=t.selected[e+1].val;$.each(a.child,function(e,i){if(""!==s){if(i.value===s)return void(a.hasChild=!0)}else for(var n=t.allGoods,o=0,r=n.length;r>o;o++)if(parseFloat(a.level)+1===parseFloat(n[o].level)){i.value===n[o].name&&(a.hasChild=!1);break}})}else n&&n.child?$.each(n.child,function(e,t){t.value===a.value&&(a.hasChild=!0)}):a.hasChild=!0});var u={index:e,num:c,data:p,formateListPro:""===c.index?!1:!0,bigTagJson:t.bigTagJson,stockData:t.stockData,presalesData:t.presalesData,hdinfoData:t.hdinfoData,hdinfoBookingData:t.hdinfoBookingData,hdinfoPresalesData:t.hdinfoPresalesData,isAllBooking:t.isAllBooking},g="";if(g=doT.template(p[c.index]&&p[c.index].list?$("#J_proTmp").html():$("#J_proTmp2").html()),0===r?$(".J_step").eq(e).replaceWith(g(u)).find("img").each(function(){a.loadImage($(this))}):$("#J_list").append(g(u)).find("img").each(function(){a.loadImage($(this))}),c=c.index,s[c]&&s[c].list)this.loopGoods(e+1,s[c].list,s[c],r);else if(0===r){var f=$(".J_step").eq(e).find("li"),m=0,v=0,_=0;$.each(f,function(e){f.eq(e).hasClass("btn-hide")||(v++,m=e),(f.eq(e).hasClass("active")||f.eq(e).hasClass("active-disabled"))&&(_=e)}),this.selectStep(1),f.eq(1===v?m:_).trigger("click")}else{var b=s[c].goods.service_list;b&&(g=i(26),$("#J_list").append(g(b)),$(".J_service").removeClass("hide")),g=doT.template($("#J_proImgTmp").html()),$("#J_sliderView").html(g(s[c].goods)),0!==s[c].goods.images.length&&o(),t.product={name:s[c].goods.goods_name,market_price:s[c].goods.market_price,price:s[c].goods.goods_price,shipment_text:s[c].goods.shipment_text||""},t.id=s[c].goods.goods_id,t.cid=s[c].goods.commodity_id,t.type=s[c].goods.action.type,t.isbigtap=s[c].goods.action.isBigtap,l.relationCallback(),s[c].stock=l.getStockData(t.type,t.isbigtap?0:1);var y=l.getStockData(t.type,0)[t.id];if(y&&(t.hdendtime=y.endtime||0,t.hdstarttime=y.starttime||0),s[c].hdendtime=t.hdendtime,s[c].hdstarttime=t.hdstarttime,s[c].orderData=t.orderData,s[c].href=this.config.loginUrl,s[c].isLogin=this.config.isLogin,s[c].isAllGoodsBooking=t.isAllBooking,g=i(27),$("#J_buyBtnBox").html(g(s[c])),$(".J_proPrice").html(t.product.price+"元 "+(t.product.shipment_text?"<em>("+t.product.shipment_text+")</em>":"")+(parseFloat(t.product.market_price)>parseFloat(t.product.price)?"<del>"+t.product.market_price+"元</del>":"")),$(".J_proOrder").addClass("hide"),"booking"===t.type){$(".J_proBook,#J_bookFlow").removeClass("hide");var x=s[c].goods.booking_info;t.bookPrice=x.price,$(".J_bookPrice").html(x.price),t.bookStarttime=x.pre_start_time,t.bookEndtime=x.pre_end_time,l.getTime(),t.saltTitle=x.sale_title,$("#J_bookFlow").find(".item-infor").eq(0).html(l.formatBookTime(x.pre_start_time)+" - "+l.formatBookTime(x.pre_end_time)).end().eq(1).html(l.formatBookTime(x.final_start_time)+" - "+l.formatBookTime(x.final_end_time)).end().eq(2).html(t.saltTitle),window.getBookRule||(window.getBookRule=!0,a.ajax({url:l.config.bookRule,data:{product_id:t.id},callback:function(e){e&&1===e.code?($(".J_bookRuleTips").removeClass("hide"),$(".J_bookRuleCon").find("div").html(e.data.rules_detail)):$(".J_bookRuleTips").addClass("hide")}}))}else $(".J_proBook,#J_bookFlow").addClass("hide"),("subscribe"===t.type||"reserve"===t.type)&&($(".J_proOrder").removeClass("hide"),$(".J_orderPrice").html(t.product.price+(t.product.shipment_text?"<em>("+t.product.shipment_text+")</em>":"")+(parseFloat(t.product.market_price)>parseFloat(t.product.price)?"<del>￥"+t.product.market_price+"</del>":"")),t.subscribe="subscribe"===t.type?s[c].goods.subscribe_info:s[c].goods.reserve_info,l.getTime(),t.isAllBooking===!1?d():t.defaultOnce===!1&&d());"presales"===t.type&&(t.saltTitle=s[c].goods.presales_info.sale_title)}},stockCheckInit:function(){for(var e=this,i=t.allGoods,a="",s=0,n=i.length;n>s;s++){var o=i[s],r=!1;if(o.action&&("common"!==o.action&&"glass"!==o.action?(r=!0,t.id=o.id):(a=e.getStockData(o.action,1),a&&a[o.id]&&(r=!0,t.id=o.id)),r)){t.selected[parseFloat(o.level)-1].val=o.name;for(var d=0;n>d;d++){var l=i[d].child;if(l)for(var c=0;c<l.length;c++)if(l[c].id===o.id){t.selected[parseFloat(i[d].level)-1].val=i[d].name;break}}break}if(!o.action){for(var p=!1,h=0,u=o.child.length;u>h;h++){var g=o.child[h];if("common"!==g.action&&"glass"!==g.action?r=!0:(a=e.getStockData(g.action,1),a&&a[g.id]&&(r=!0)),r){t.selected[parseFloat(o.level)-1].val=o.name,t.selected[parseFloat(g.level)-1].val=g.value,t.id=g.id,p=!0;break}}if(p)break}}t.id||this.searchChild(i[0])},searchChild:function(e){e.child&&e.child.length>0?this.searchChild(e.child[0]):t.id=e.id},formatPro:function(){var e=this;e.config.isLogin||(e.config.list.isLogin=e.config.isLogin,e.config.list.href=e.config.loginUrl,e.config.elm.find(".J_proLogin").attr("href",e.config.loginUrl).end().find(".J_notic").removeClass("hide")),e.config.elm.find(".J_error,.J_load").addClass("hide").end().find(".J_main").removeClass("hide"),t.services={},$("#J_list").html(""),e.loopGoods(0,e.config.list.list),e.selectStep(),e.selectService(),window.getAddressStock||e.addressInit(t.isbigtap),e.formateProList(),"subscribe"===t.type||"reserve"===t.type?e.changeAddress().setSoldout():(1===window.AddressCbData.data.can_delivery?"disabled"===$("#J_buyBtnBox").find(".btn").data("sign")?$("#J_productStatus").addClass("soldout").removeClass("nohas active noserver presales").find(".time").html(""):(e.changeAddress().setBuy(window.AddressCbData),e.changeAddress().changRelation()):e.changeAddress().setNoserver(window.AddressCbData),$("#J_buyBtnBox").find(".btn").hasClass("J_setRemind")&&r({buyModule:c,_config:t}));var i=0,a=setInterval(function(){window.flowData&&(d({_config:t}).setFlow(t.cid),clearInterval(a)),i>=50&&clearInterval(a),i++},100);this.config.isLogin&&!t.isbigtap&&this.checkLike()},addressInit:function(e){t.selectedAddr.length?this.checkSelectAddr(e):(this.chooseRegionsInit(e),t.coupon||(d({_config:t}).init(),t.coupon=!0))},chooseRegionsInit:function(e,i){var a=this;MI.buyChooseAddress.init({showTrigger:"#J_switchChooseRegions",afterChoose:function(s,n){s&&s.length&&(t.selectedAddr=s,n&&(t.mihomeId=n),$("#J_modalChooseRegions").modal("hide"),a.checkSelectAddr(e,i))}})},checkLike:function(){a.ajax({url:this.config.orderSite+"/favorite/check/id/"+t.id,data:{},callback:function(e){e&&1==e.code?$("#J_like").addClass("current"):$("#J_like").removeClass("current")}})},changeLike:function(){var e=this;$("body").on("click","#J_like",function(){a.ajax($("#J_like").hasClass("current")?{url:e.config.orderSite+"/favorite/drop/id/"+t.id,data:{},callback:function(e){e&&1==e.code&&($("#J_like").removeClass("current"),$(".J_redCopy").removeClass("redsd"))}}:{url:e.config.orderSite+"/favorite/add/id/"+t.id,data:{},callback:function(e){e&&1==e.code&&($("#J_like").addClass("current"),$(".J_redCopy").addClass("redsd"))}})})},setBtn:function(e){if("subscribe"!==t.type&&"reserve"!==t.type||3===e){var i=$("#J_buyBtnBox").find(".btn");if(-1===e)return void i.replaceWith('<a href="'+this.config.loginUrl+'"  class="btn btn-primary btn-biglarge ">登录后购买</a>');if(1===e)return void i.replaceWith('<a href="javascript:void(0);" class="btn btn-primary  btn-biglarge J_proBuyBtn" '+(t.btnTxt[t.type]?' id="J_proAddcart" ':"")+' data-type="'+t.type+'" data-isbigtap="'+t.isbigtap+'" data-name="'+i.data("name")+'">'+(t.btnTxt[t.type]?t.btnTxt[t.type]:i.data("name"))+"</a>");if(2===e)return void i.replaceWith('<a data-sign="disabled" data-type="'+t.type+'" data-isbigtap="'+t.isbigtap+'" data-name="'+i.data("name")+'" class="btn btn-disabled btn-biglarge" href="javascript:void(0);" >暂时无法送达</a>');if(3===e)return void i.replaceWith('<a data-sign="disabled" data-type="'+t.type+'" data-name="'+i.data("name")+'" class="btn btn-disabled btn-biglarge" href="javascript:void(0);" >已预约</a>');"presales"!=t.type&&"booking"!=t.type&&"bigtap"!=t.type||!t.isbigtap?(i.replaceWith('<a data-sign="disabled" data-type="'+t.type+'" data-isbigtap="'+t.isbigtap+'" data-name="'+i.data("name")+'" class="btn btn-line-primary btn-biglarge J_setRemind" href="javascript:void(0);" >到货通知</a>'),r({buyModule:c,_config:t})):i.replaceWith('<a data-sign="disabled" data-type="'+t.type+'" data-isbigtap="'+t.isbigtap+'" data-name="'+i.data("name")+'" class="btn btn-disabled btn-biglarge" href="javascript:void(0);" >暂时缺货</a>'),this.setStepLi()}},setStepLi:function(){var e=$(".J_step").length,t=$(".J_step").eq(e-1).find("li");t.filter(".active").addClass("active-disabled")},changeAddress:function(){var e=this,i=$("#J_productStatus");return{changRelation:function(){var i=$("#J_relation");"disabled"!==$("#J_buyBtnBox").find(".btn").data("sign")?(e.relation&&e.relation.length>0&&""!==i.attr("style")&&i.stop().animate({height:"133px"},300,"linear",function(){i.attr("style","")}),t.isbigtap&&(e.getStockData(t.type,0).length>0&&e.getStockData(t.type,0)[t.id].hdstatus>=3?e.setBtn():(e.countDown(),e.changeAddress().setBuy()))):(e.relation&&e.relation.length>0&&i.stop().animate({height:0},300,"linear",function(){i.css("overflow","hidden")}),"booking"===t.type&&t.isbigtap?e.countDown():r({buyModule:c,_config:t}))},setBtnRemind:function(){this.changRelation()},setNoAddress:function(){i.addClass("nohas").removeClass("noserver over active presales booking").find(".time").html("")},setNoserver:function(){e.setBtn(2),i.addClass("noserver").removeClass("nohas over active presales booking").find(".time").html("")},setSoldout:function(){("common"===t.type||"bigtap"===t.type||"presales"===t.type||"booking"===t.type||"glass"===t.type)&&this.setBtnRemind(),i.addClass("soldout").removeClass("nohas active noserver presales").find(".time").html("")},setBuy:function(a){return"subscribe"===t.type||"reserve"===t.type?void i.addClass("soldout").removeClass("nohas noserver active presales booking").find(".time").html(""):(i.removeClass("soldout noserver active presales booking").find(".time").html(a?a.data.est_delivery_desc:""),"presales"===t.type?(i.addClass("presales"),i.find(".time").html(t.saltTitle)):"booking"===t.type?(i.addClass("booking"),i.find(".time").html(t.saltTitle)):i.addClass("active"),void(t.isbigtap||e.setBtn(1)))},changgeInfor:function(i){return"subscribe"===t.type||"reserve"===t.type?void e.changeAddress().setSoldout():void(1===i.data.can_delivery?i.data.is_cos?e.changeAddress().setSoldout():"disabled"===$("#J_buyBtnBox").find(".btn").data("sign")?e.changeAddress().setSoldout():(e.changeAddress().setBuy(i),e.changeAddress().changRelation()):e.changeAddress().setNoserver(i))}}},checkSelectAddr:function(){window.getAddressStock=!0;var e=this;if(this.selectStockInit||(this.stockCheckInit(),this.selectStockInit=!0),"common"===t.type&&"presales"===t.type&&"booking"===t.type&&"bigtap"===t.type&&"glass"===t.action)return void e.changeAddress().setNoAddress();var s=t.selectedAddr.length>4?1:0,n={product_id:t.id,item_id:0,province_id:t.selectedAddr[s+0].id,city_id:t.selectedAddr[s+1].id,district_id:t.selectedAddr[s+2].id,area:t.selectedAddr[s+3].id};("presales"===t.type||"booking"===t.type)&&(n.is_presale=1),a.ajax({url:MI.GLOBAL_CONFIG.orderSite+"/api/deliverySearch.php",data:n,error:function(){e.changeAddress().setNoserver()},callback:function(a){t.afterSale=a&&a.data&&a.data.after_sale?a.data.after_sale:null;var s=i(28);$("#J_policy").html(s(t.afterSale)),a.isbigtap=t.isbigtap,a&&1===a.code&&1===a.data.can_delivery?(a.data.mihome_id&&(t.mihomeId=a.data.mihome_id),e.changeAddress().changgeInfor(a)):e.changeAddress().setNoserver(),window.AddressCbData=a,e.checkIsBigtag()}})},loopCheckIsBigtag:function(e,i){var a=i[parseFloat(t.selected[e].index)];return(!a||a&&!a.price_min)&&(a=i[0]),a&&a.list?void this.loopCheckIsBigtag(e+1,a.list):(a=a.goods,a.action&&("bigtap"===a.action.type||"booking"===a.action.type&&a.action.isBigtap||"presales"===a.action.type&&a.action.isBigtap)?(t.type=a.action.type,t.isbigtap=a.action.isBigtap,t.id=a.goods_id,void this.getHdInfoStatus(t.type)):void this.formatPro())},checkIsBigtag:function(){this.getGoodsStock()},setSelectIndex:function(e,i,a){for(var s=0,n=t.selected.length;n>s;s++)if(s===e){t.selected[s]={val:i,index:a};break}},unselected:function(e,i){if(t.selected[e].val=i,t.selected[t.selected.length-1].child=[],!(0>e)){var a=!1;$.each(t.allGoods,function(s,n){n.child.length>0&&$.each(n.child,function(s,o){o.value!==i||a||(t.selected[e-1].val=n.name,t.selected[e-1].index=n.level,2>e&&(t.selected[e+1].val=n.child[0].val),a=!0)})})}},selectStep:function(e){var i=this,s=$(".J_step");s.find("li").on("click",function(){window.setFormatPro=!1,t.isAllBooking=!1,t.defaultOnce=!1;var n=$(this);if(!n.hasClass("active")&&!n.hasClass("active-disabled")||e){var o=n.parents(".J_step"),r=o.data("index");if(r===s.length-1){if(n.hasClass("disabled")&&parseFloat(n.data("childlen"))>=1)return i.unselected(o.data("index"),n.data("value")),void i.checkIsBigtag();i.setSelectIndex(r,String(n.data("value")),n.data("index")),i.checkIsBigtag()}else i.setSelectIndex(r,String(n.data("value")),n.data("index")),i.loopGoods(0,i.config.list.list,"",0);$(".step-list").find("img").each(function(){a.loadImage($(this))})}})},getGoodsStock:function(){if(t.stockDataId.length>0){var e=this,i={url:e.config.orderapi+"/stock/listv2?gids="+t.stockDataId.join(","),error:function(){e.checkPresalesDataId()},callback:function(i){t.stockData=i.data,e.checkPresalesDataId()}};if(t.mihomeId){var s=t.selectedAddr.length>4?1:0;i.data={mihome_id:t.mihomeId,province_id:t.selectedAddr[s+0].id,city_id:t.selectedAddr[s+1].id,district_id:t.selectedAddr[s+2].id,area:t.selectedAddr[s+3].id}}a.ajax(i)}else this.checkPresalesDataId()},getStockDataName:function(e){var i={0:"stockData",1:"stockData"};return t.bigTagJson[e]&&(i=t.bigTagJson[e]),i},getStockData:function(e,i){return t[this.getStockDataName(e)[i]]},selectFirstStock:function(e){for(var i=this,a=e||t.allGoods,s="",n=0,o=a.length;o>n;n++){var r=a[n],d=!1;if(r.action&&(r.isbigtap?(s=i.getStockData(r.action,0),s&&s[r.id]&&2===s[r.id].hdstatus&&(d=!0)):(s=i.getStockData(r.actio,1),s&&s[r.id]&&(d=!0)),d)){t.selected[parseFloat(r.level)-1].val=r.name;for(var l=0;o>l;l++){var c=a[l].child;if(c)for(var p=0;p<c.length;p++)if(c[p].id===r.id){t.selected[parseFloat(a[l].level)-1].val=a[l].name;break}}break}if(!r.action){for(var h=!1,u=0,g=r.child.length;g>u;u++){var f=r.child[u];if(f.isbigtap?(s=i.getStockData(f.action,0),s&&s[r.id]&&2===s[r.id].hdstatus&&(d=!0)):(s=i.getStockData(f.action,1),s&&s[f.id]&&(d=!0)),d){t.selected[parseFloat(r.level)-1].val=r.name,t.selected[parseFloat(f.level)-1].val=f.value,h=!0;break}}if(h)break}}},checkPresalesDataId:function(){t.presalesDataId.length>0?this.getPresalesInfo():t.bigtapDataId.length>0?this.loopBigtap():this.formatPro()},getPresalesInfo:function(){var e=this,i={};if(t.mihomeId){var s=t.selectedAddr.length>4?1:0;i={mihome_id:t.mihomeId,province_id:t.selectedAddr[s+0].id,city_id:t.selectedAddr[s+1].id,district_id:t.selectedAddr[s+2].id,area:t.selectedAddr[s+3].id}}i.channel="presales",a.ajax({url:e.config.orderapi+"/stock/listv2?gids="+t.presalesDataId.join(","),data:i,error:function(){e.checkBigtapDataId()},callback:function(i){t.presalesData=i.data,e.checkBigtapDataId()}})},checkBigtapDataId:function(){t.bigtapDataId.length>0?this.loopBigtap():this.formatPro()},loopBigtap:function(){var e=this;$.each(t.bigtapDataType,function(t,i){e.getHdInfoStatus(i,t)})},getHdInfoStatus:function(e,i){var s=this,n={m:1};n.source="bigtap",t.mihomeId&&(n.storage=t.mihomeId),"presales"===e&&(n.source="presales_bigtap"),"booking"===e&&(n.source="booking_bigtap"),a.ajax({url:MI.GLOBAL_CONFIG.damiaoSite+"hdinfo/cn",data:n,jsonp:"jsonpcallback",jsonpCallback:"hdinfo_"+n.source,error:function(){s.formatPro()},callback:function(a){"presales"===e?t.hdinfoPresalesData=a.status:"booking"===e?t.hdinfoBookingData=a.status:t.hdinfoData=a.status,void 0!=i?i==t.bigtapDataType.length-1&&s.formatPro():s.formatPro()}})},checkProSelected:function(e){for(var t=$(".J_step"),i=0,a=t.length;a>i;i++)if(i>0&&!t.eq(i).find(".active").length&&!t.eq(i).find(".active-disabled").length)return void MI.alert({msg:"请"+t.eq(i).find(".step-title").data("name"),isConfirm:!1});e()},bigtapAdd:function(e){var i="presales"===t.type?"presales_bigtap":"bigtap";i="booking"===t.type?"booking_bigtap":i;var a={obj:e,gid:t.id,callback:c.succCallback,sourceVal:i,overCallback:function(e){e.removeClass("btn-primary").addClass("btn-disabled").html("暂时缺货").removeClass("J_proBuyBtn")}};t.mihomeId>0&&(a.storage=t.mihomeId),MI.bigtap.init(a)},succCallback:function(e){var i="";e&&1===e.code?(i="booking"===t.type||"glass"===t.type?c.config.orderSite+"/buy/checkout?quick_order=1":c.config.staticUrl+t.id+"&protype=product&pid="+t.pid,t.pid=e.message,c.checkServices(i)):1!==e.code&&MI.alert({msg:e.msg})},checkParts:function(e){if(t.parts.length){var i=0,a=[];$.each(t.parts,function(s,n){return a.push(n.is_bargain?n.bargain_id:n.id),i>=t.parts.length-1?void MI.addShopCart(a.join("_"),function(t){location.href=e+"&relation="+(t&&1===t.code?"success":"fail")},$(".J_proBuyBtn")):void(i+=1)})}else location.href=e},addCartServices:function(e,i,a,s){MI.addShopCart(e,function(e){e&&1===e.code||(c.addServicefail=!0),c.addServiceIndex===a-1&&(i+=c.addServicefail?"&insurance=fail":"&insurance=success",c.checkParts(i)),c.addServiceIndex++},$(".J_proBuyBtn"),{parent_itemId:t.pid,source:s})},checkServices:function(e){var i=this;if($.isEmptyObject(t.services))c.checkParts(e);else{var a=[];for(var s in t.services)for(var n in t.services[s])a.push(t.services[s][n]);c.addServicefail=!1,c.addServiceIndex=0,a.forEach(function(t,s){setTimeout(function(){i.addCartServices(t.bargain_id,e,a.length,t.source)},500*s)})}},addCart:function(){var e=this;$("body").on("click",".J_proBuyBtn",function(){var i=$(this);e.checkProSelected(function(){return"common"===t.type?void MI.addShopCart(t.id,c.succCallback):"presales"===t.type?void($(i).data("isbigtap")?e.bigtapAdd($("#J_proAddcart")):MI.addShopCart(t.id,c.succCallback,$("#J_proAddcart"),{source:"presales"})):"glass"===t.type?void(e.config.isLogin?($("#J_orderModalGlassBuy").modal("show"),MI.glassBuy(t.id,function(e,t){MI.addShopCart(t,c.succCallback,$("#J_GlassAddCart"),{source:"glasses",extend_field:e})})):window.location.href=e.config.loginUrl):"booking"===t.type?void($(i).data("isbigtap")?e.bigtapAdd($("#J_proAddcart")):MI.addShopCart(t.id,c.succCallback,$("#J_proAddcart"),{source:"booking"})):"subscribe"===t.type?void l({_config:t,need_address:!0}).init():"reserve"===t.type?void l({_config:t,need_address:!1}).init():void e.bigtapAdd($("#J_proAddcart"))})})},loopGoodsList:function(e,i){var a=this;$.each(i,function(i,s){var n=s.list||[],o=[];s.list&&$.each(s.list,function(e,t){o.push({value:t.value,level:t.level,isbigtap:t.goods&&t.goods.action?t.goods.action.isBigtap:!1,action:t.goods&&t.goods.action?t.goods.action.type:"",id:t.goods&&t.goods.goods_id?t.goods.goods_id:0})}),t.allGoods.push({title:s.name,name:s.value,level:s.level,child:o,isbigtap:s.goods&&s.goods.action?s.goods.action.isBigtap:!1,action:s.goods&&s.goods.action?s.goods.action.type:"",id:s.goods&&s.goods.goods_id?s.goods.goods_id:0,icon_url:s.goods&&s.goods.icon_url?s.goods.icon_url:"",image:s.goods&&s.goods.image?s.goods.image:""}),n.length>0?a.loopGoodsList(e+1,n):(n=s.goods||[],"bigtap"===n.action.type?(t.bigtapDataId.push({id:n.goods_id,type:n.action.type}),t.bigtapDataType.push(n.action.type)):"presales"===n.action.type||"booking"===n.action.type?n.action.isBigtap?(t.bigtapDataId.push({id:n.goods_id,type:n.action.type}),t.bigtapDataType.push(n.action.type)):t.presalesDataId.push(n.goods_id):(("common"===n.action.type||"glass"===n.action.type)&&t.stockDataId.push(n.goods_id),("subscribe"===n.action.type||"reserve"===n.action.type)&&t.orderDataId.push(n.goods_id)))}),t.bigtapDataType=a.uniqueArr(t.bigtapDataType),t.selected.push({index:0,val:""})},uniqueArr:function(e){for(var t=[],i={},a=0;a<e.length;a++)i[e[a]]||(t.push(e[a]),i[e[a]]=1);return t},unique:function(e){for(var i=[e[0]],a=1,s=e.length;s>a;a++){for(var n=!1,o=0,r=i.length;r>o;o++)if(e[a].name===i[o].name&&e[a].level===i[o].level){n=!0;break}n||(i.push(e[a]),t.sortData.push(e[a].name))}return i},reloadFun:function(){var e=this;$(".J_reload").on("click",function(){$(".J_load").removeClass("hide"),$(".J_error").addClass("hide"),e.setAjaxInt()})},showError:function(e){$(".J_load").addClass("hide"),e=e?e:"有点小问题，请点击按钮刷新重试",$(".J_error").removeClass("hide").find("h3").html(e)},checkIsAllBookingGoods:function(e){e.is_choose===!0?t.isAllBooking=!1:$.each(e.list,function(e,i){i.goods&&i.goods.action&&!i.list&&"subscribe"!==i.goods.action.type&&"reserve"!==i.goods.action.type&&(t.isAllBooking=!1),i.list&&$.each(i.list,function(e,i){"subscribe"!==i.goods.action.type&&"reserve"!==i.goods.action.type&&(t.isAllBooking=!1)})})},setAjaxInt:function(){var e=this;setTimeout(function(){a.ajax({url:e.config.orderGet,data:{product_id:t.pid},jsonpCallback:"proget2callback",error:function(i,a,s){var n={product_id:t.pid,locationHref:window.location.href,errorData:i,errorType:a,error:s};_msq.push(["trackEvent","AJAX_ERROR",encodeURIComponent(e.config.orderGet),JSON.stringify(n)]),e.showError()},callback:function(i){if(1===i.code){e.config.list=i.data,e.checkIsAllBookingGoods(e.config.list);var a=doT.template($("#J_addressTmp").html());e.config.list.isLogin=e.config.isLogin,e.config.list.href=e.config.loginUrl,t.loginUrl=e.config.loginUrl,e.addCart(),t.commodityIds=i.data.commodity_ids,""!==i.data.product_desc_ext&&$("#J_desc").html(i.data.product_desc_ext),""!==i.data.name&&(t.proName=i.data.name,$(".J_proName").html(t.proName)),e.loopGoodsList(0,e.config.list.list),t.allGoods=e.unique(t.allGoods),$(".J_addressWrap").html(a()).removeClass("hide"),e.addressInit()}else e.showError(i.msg)}})},500),a.ajax({url:e.config.orderSite+"/product/getExtendInfo",data:{product_id:t.pid},callback:function(t){if(1===t.code&&(t=t.data,e.relation=t.relation,t.info&&t.info.desc_tabs_view&&t.info.desc_tabs_view.length>0)){tmp=i(29),$("#J_proInfo").append(tmp(t.info.desc_tabs_view[0])).find(".J_imgBox").each(function(){$(this).slider({auto:!0,pager:!0,infiniteLoop:!0})});for(var s=$(".J_markdown"),n=0;n<s.length;n++)s.eq(n).html(window.marked(s.eq(n).data("desc")));var o=$(".section");o.visibleWatcher({offset:100,onVisible:function(e,t){o.filter(function(e){return t+1>=e}).addClass("preload").find("img").each(function(){a.loadImage($(this))})}})}}})},relationCallback:function(){var e=this,i="",a={cid:t.cid,data:e.relation};if(e.relation){if(0===e.relation.length)return void $("#J_relation").addClass("hide");$("#J_relation").removeClass("hide"),i=doT.template($("#J_relationTmp").html());var s=0;$("#J_relation").html(i(a)).find(".list").find("li").find("del").each(function(){s+=parseFloat($(this).data("maxsave"))}),s>0&&($(".J_saleMax").removeClass("hide"),$(".J_salePrice").html(s)),e.selectList($("#J_parts"),"parts"),e.selectList($("#J_install"),"install");var n=t.parts;t.parts=[],$.each(n,function(e,t){$("#J_relation").find(".list").find("li").eq(t.index).find("i").click().end().find("a").eq(t.item).click()})}},bookRuleModalFun:function(){$(".J_bookRule,.J_bookRuleCon").hover(function(){$(".J_bookRuleCon").removeClass("hide")},function(){$(".J_bookRuleCon").addClass("hide")})},init:function(){this.hideLoadNotic(),n(),this.reloadFun(),this.setAjaxInt(),setTimeout(function(){MI.proNav({id:window.proBuy_id,target:"buy"}),$(".J_proName").html(t.proName)},500),this.bookRuleModalFun(),this.changeLike()}};c.init()},$(document).ready(function(){$.productBuy({id:window.proBuy_id})})},function(e,t){var i=function(){var e="fix",t=$(window).scrollTop(),i=$("#J_img"),a=$("#J_proHeader").offset().top||140,s=i.offset().top,n=function(){var n=0;$(".J_notic").hasClass("hide")||(n=48),t>=s-64&&t>=a+n?(i.addClass(e).css({left:$(".pro-choose-main").offset().left}),t>=$("#J_proInfo").offset().top-640-n?(i.removeClass(e),i.css({marginTop:$(".pro-info").height()-560-n+"px"})):i.css({marginTop:0})):i.removeClass(e)};$(window).on("scroll.fix",function(){t=$(this).scrollTop(),n()}),setTimeout(function(){n()},1e3),$(window).on("resize.fix",function(){n()})};e.exports=i},function(e,t){!function(e){function t(t){function i(){
for(var t=-1,i=e(document).scrollTop(),a=0,s=l.length;s>a&&i+o.viewport.height()>l[a];a+=1)t+=1;return t}function a(){var t=i();d!==t&&(d=t,r.filter(function(t){return d>=t&&!e(this).hasClass(o.visibleClass)}).addClass(o.visibleClass).trigger("visible.visibleWatcher"),o.onVisible(r.eq(d),d))}function s(){r.each(function(){var t=e(this).attr("data-offset")?Number(e(this).attr("data-offset")):o.offset,i=t%1===0?t:t*o.viewport.height();l.push(e(this).offset().top+i)}),a(),o.onLoad()}var n,o,r=e(this),d=-1,l=[];n={viewport:e(window),visibleClass:"is-visible",offset:300,onLoad:e.noop,onVisible:e.noop},o=e.extend({},n,t),s(),o.viewport.on({"scroll.visibleWatcher":a,"resize.visibleWatcher":s})}e.fn.visibleWatcher=function(e){return t.call(this,e),this}}(jQuery)},function(e,t,i){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||c.defaults,this.rules=p.normal,this.options.gfm&&(this.rules=this.options.tables?p.tables:p.gfm)}function i(e,t){if(this.options=t||c.defaults,this.links=e,this.rules=h.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?h.breaks:h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function a(e){this.options=e||{}}function s(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options}function n(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?String.fromCharCode("x"===t.charAt(1)?parseInt(t.substring(2),16):+t.substring(1)):""})}function r(e,t){return e=e.source,t=t||"",function i(a,s){return a?(s=s.source||s,s=s.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(a,s),i):new RegExp(e,t)}}function d(){}function l(e){for(var t,i,a=1;a<arguments.length;a++){t=arguments[a];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}function c(e,i,a){if(a||"function"==typeof i){a||(a=i,i=null),i=l({},c.defaults,i||{});var o,r,d=i.highlight,p=0;try{o=t.lex(e,i)}catch(h){return a(h)}r=o.length;var u=function(e){if(e)return i.highlight=d,a(e);var t;try{t=s.parse(o,i)}catch(n){e=n}return i.highlight=d,e?a(e):a(null,t)};if(!d||d.length<3)return u();if(delete i.highlight,!r)return u();for(;p<o.length;p++)!function(e){return"code"!==e.type?--r||u():d(e.text,e.lang,function(t,i){return t?u(t):null==i||i===e.text?--r||u():(e.text=i,e.escaped=!0,void(--r||u()))})}(o[p])}else try{return i&&(i=l({},c.defaults,i)),s.parse(t.lex(e,i),i)}catch(h){if(h.message+="\nPlease report this to https://github.com/chjj/marked.",(i||c.defaults).silent)return"<p>An error occured:</p><pre>"+n(h.message+"",!0)+"</pre>";throw h}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:d,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:d,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:d,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=r(p.item,"gm")(/bull/g,p.bullet)(),p.list=r(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=r(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=r(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=r(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=l({},p),p.gfm=l({},p.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),p.gfm.paragraph=r(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=l({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=p,t.lex=function(e,i){var a=new t(i);return a.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,i){for(var a,s,n,o,r,d,l,c,h,e=e.replace(/^ +$/gm,"");e;)if((n=this.rules.newline.exec(e))&&(e=e.substring(n[0].length),n[0].length>1&&this.tokens.push({type:"space"})),n=this.rules.code.exec(e))e=e.substring(n[0].length),n=n[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?n:n.replace(/\n+$/,"")});else if(n=this.rules.fences.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"code",lang:n[2],text:n[3]||""});else if(n=this.rules.heading.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"heading",depth:n[1].length,text:n[2]});else if(t&&(n=this.rules.nptable.exec(e))){for(e=e.substring(n[0].length),d={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/\n$/,"").split("\n")},c=0;c<d.align.length;c++)d.align[c]=/^ *-+: *$/.test(d.align[c])?"right":/^ *:-+: *$/.test(d.align[c])?"center":/^ *:-+ *$/.test(d.align[c])?"left":null;for(c=0;c<d.cells.length;c++)d.cells[c]=d.cells[c].split(/ *\| */);this.tokens.push(d)}else if(n=this.rules.lheading.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"heading",depth:"="===n[2]?1:2,text:n[1]});else if(n=this.rules.hr.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"hr"});else if(n=this.rules.blockquote.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"blockquote_start"}),n=n[0].replace(/^ *> ?/gm,""),this.token(n,t,!0),this.tokens.push({type:"blockquote_end"});else if(n=this.rules.list.exec(e)){for(e=e.substring(n[0].length),o=n[2],this.tokens.push({type:"list_start",ordered:o.length>1}),n=n[0].match(this.rules.item),a=!1,h=n.length,c=0;h>c;c++)d=n[c],l=d.length,d=d.replace(/^ *([*+-]|\d+\.) +/,""),~d.indexOf("\n ")&&(l-=d.length,d=this.options.pedantic?d.replace(/^ {1,4}/gm,""):d.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(r=p.bullet.exec(n[c+1])[0],o===r||o.length>1&&r.length>1||(e=n.slice(c+1).join("\n")+e,c=h-1)),s=a||/\n\n(?!\s*$)/.test(d),c!==h-1&&(a="\n"===d.charAt(d.length-1),s||(s=a)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(d,!1,i),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(n=this.rules.html.exec(e))e=e.substring(n[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]});else if(!i&&t&&(n=this.rules.def.exec(e)))e=e.substring(n[0].length),this.tokens.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(t&&(n=this.rules.table.exec(e))){for(e=e.substring(n[0].length),d={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<d.align.length;c++)d.align[c]=/^ *-+: *$/.test(d.align[c])?"right":/^ *:-+: *$/.test(d.align[c])?"center":/^ *:-+ *$/.test(d.align[c])?"left":null;for(c=0;c<d.cells.length;c++)d.cells[c]=d.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(d)}else if(t&&(n=this.rules.paragraph.exec(e)))e=e.substring(n[0].length),this.tokens.push({type:"paragraph",text:"\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1]});else if(n=this.rules.text.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"text",text:n[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:d,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:d,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=r(h.link)("inside",h._inside)("href",h._href)(),h.reflink=r(h.reflink)("inside",h._inside)(),h.normal=l({},h),h.pedantic=l({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=l({},h.normal,{escape:r(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:r(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=l({},h.gfm,{br:r(h.br)("{2,}","*")(),text:r(h.gfm.text)("{2,}","*")()}),i.rules=h,i.output=function(e,t,a){var s=new i(t,a);return s.output(e)},i.prototype.output=function(e){for(var t,i,a,s,o="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),o+=s[1];else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),"@"===s[2]?(i=this.mangle(":"===s[1].charAt(6)?s[1].substring(7):s[1]),a=this.mangle("mailto:")+i):(i=n(s[1]),a=i),o+=this.renderer.link(a,null,i);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),e=e.substring(s[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):n(s[0]):s[0];else if(s=this.rules.link.exec(e))e=e.substring(s[0].length),this.inLink=!0,o+=this.outputLink(s,{href:s[2],title:s[3]}),this.inLink=!1;else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){o+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),o+=this.renderer.strong(this.output(s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),o+=this.renderer.em(this.output(s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),o+=this.renderer.codespan(n(s[2],!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),o+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),o+=this.renderer.del(this.output(s[1]));else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),o+=this.renderer.text(n(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(s[0].length),i=n(s[1]),a=i,o+=this.renderer.link(a,null,i);return o},i.prototype.outputLink=function(e,t){var i=n(t.href),a=t.title?n(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(i,a,this.output(e[1])):this.renderer.image(i,a,n(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,i="",a=e.length,s=0;a>s;s++)t=e.charCodeAt(s),Math.random()>.5&&(t="x"+t.toString(16)),i+="&#"+t+";";return i},a.prototype.code=function(e,t,i){if(this.options.highlight){var a=this.options.highlight(e,t);null!=a&&a!==e&&(i=!0,e=a)}return t?'<pre><code class="'+this.options.langPrefix+n(t,!0)+'">'+(i?e:n(e,!0))+"\n</code></pre>\n":"<pre><code>"+(i?e:n(e,!0))+"\n</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,i){return"<h"+t+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t){var i=t?"ol":"ul";return"<"+i+">\n"+e+"</"+i+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var i=t.header?"th":"td",a=t.align?"<"+i+' style="text-align:'+t.align+'">':"<"+i+">";return a+e+"</"+i+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,i){if(this.options.sanitize){try{var a=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(s){return""}if(0===a.indexOf("javascript:")||0===a.indexOf("vbscript:")||0===a.indexOf("data:"))return""}var n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>"},a.prototype.image=function(e,t,i){var a='<img src="'+e+'" alt="'+i+'"';return t&&(a+=' title="'+t+'"'),a+=this.options.xhtml?"/>":">"},a.prototype.text=function(e){return e},s.parse=function(e,t,i){var a=new s(t,i);return a.parse(e)},s.prototype.parse=function(e){this.inline=new i(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},s.prototype.next=function(){return this.token=this.tokens.pop()},s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},s.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,i,a,s,n="",o="";for(i="",e=0;e<this.token.header.length;e++)a={header:!0,align:this.token.align[e]},i+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(n+=this.renderer.tablerow(i),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],i="",s=0;s<t.length;s++)i+=this.renderer.tablecell(this.inline.output(t[s]),{header:!1,align:this.token.align[s]});o+=this.renderer.tablerow(i)}return this.renderer.table(n,o);case"blockquote_start":for(var o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":for(var o="",r=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,r);case"list_item_start":for(var o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(var o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var d=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(d);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},d.exec=d,c.options=c.setOptions=function(e){return l(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new a,xhtml:!1},c.Parser=s,c.parser=s.parse,c.Renderer=a,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=i,c.inlineLexer=i.output,c.parse=c,e.exports=c}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,function(){return this}())},function(e,t){$.extend({miCountdown:function(e){var t={startTime:"",endTime:"",timer:"",upTime:!1,onTime:$.noop,onStart:$.noop,onEnd:$.noop},i=$.extend(t,e);if(i.startTime&&i.endTime){var a=$.isNumeric(i.startTime)?i.startTime:new Date(i.startTime).getTime()/1e3,s=$.isNumeric(i.endTime)?i.endTime:new Date(i.endTime).getTime()/1e3;return window.diffTime=window.diffTime||0,window.checkTime=function(){var e=parseInt((new Date).getTime()/1e3)+window.diffTime;if(window.surplusTime=a-e,i.timer&&clearTimeout(i.timer),i.upTime){if(e>=a&&s>e)"function"==typeof i.onStart&&i.onStart(s-e);else if(e>=s){if("function"==typeof i.onEnd)return void i.onEnd(e)}else i.onTime(window.surplusTime);i.timer=setTimeout(function(){window.checkTime()},1e3)}else e>=a&&s>e?"function"==typeof i.onStart&&i.onStart(e):e>=s?"function"==typeof i.onEnd&&i.onEnd(e):(i.onTime(window.surplusTime),i.timer=setTimeout(function(){e+=1,window.checkTime()},1e3))},window.servertime?void window.checkTime():void $.ajax({url:"//time.hd.mi.com/gettimestamp",dataType:"script",cache:!0,timeout:1e4,error:function(){window.servertime=(new Date).getTime()/1e3,window.checkTime()},success:function(){window.servertime&&"number"==typeof window.servertime?(window.servertime=window.servertime,window.diffTime=window.servertime-parseInt((new Date).getTime()/1e3)):window.servertime=(new Date).getTime()/1e3,window.checkTime()}})}}})},function(e,t,i){i(7),MI.namespace("buyChooseAddress"),MI.buyChooseAddress={init:function(e){var t=this,i={isShowStreet:!0,showTrigger:"#J_switchChooseRegions",afterChoose:$.noop};t.options=$.extend(i,e),t.apiUrl={my:MI.GLOBAL_CONFIG.orderSite+"/address/getAddressList","default":MI.GLOBAL_CONFIG.orderSite+"/address/getDefaultAddress",search:MI.GLOBAL_CONFIG.orderSite+"/address/searchByKeywords",translate:MI.GLOBAL_CONFIG.orderSite+"/address/getAreaInfoByLocation",save:MI.GLOBAL_CONFIG.orderSite+"/address/setDefaultAddress",login:MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href},t.$userDefault=$("#J_userDefaultAddress"),t.$input=$("#J_searchRegionsInput"),t.$inputClear=$("#J_searchRegionsInputClear"),t.$searchWrapper=$("#J_searchAddressWrapper"),t.$loading=t.$searchWrapper.find(".loading"),t.$myAddr=t.$searchWrapper.find("#J_myAddress"),t.$myAddrList=t.$myAddr.find(".list"),t.$noLogin=t.$myAddr.find("#J_noLogin"),t.$nearbyAddr=t.$searchWrapper.find("#J_nearbyAddress"),t.$nearbyAddrList=t.$nearbyAddr.find(".list"),t.$searchAddr=t.$searchWrapper.find("#J_searchAdress"),t.$searchAddrList=t.$searchAddr.find(".list"),t.$noResult=t.$searchWrapper.find("#J_noSearchResult"),t.searchVal=null,t.nearbyData=null,t.myData=null,t.$noLogin.find("a").attr("href",t.apiUrl.login),t.selectAddress=new MI.fourAddress,t.selectAddress.init({selectEnd:function(e){t.formatChooseResult(e)}}),t.checkLogin(),t.searchEvent(),t.selectEvent(),t.switchType(),t.getDefaultAddress(),t.showChooseRegions()},showChooseRegions:function(){var e=this,t=$("#J_modalChooseRegions");$(e.options.showTrigger).on("click",function(){var i=e.$userDefault.offset();$(window).scrollTop()+$(window).height()<i.top+t.height()&&(i.top-=t.height(),i.top+=$("#J_userDefaultAddress").height()),t.css({top:i.top,left:i.left}).modal("show").one("hidden",function(){e.revert()}),e.getMyAddress()})},checkLogin:function(){this.isLogin=$.cookie("cUserId")?!0:!1},revert:function(){this.$input.val(""),this.searchVal=null,this.toggleShow(this.$myAddr,!0),this.toggleShow(this.$nearbyAddr,!1),this.toggleShow(this.$searchAddr,!1),this.toggleShow(this.$noResult,!1)},searchEvent:function(){var e,t,i=this,a=200;i.$input.on({focus:function(){i.toggleShow(i.$myAddr,!1),i.toggleShow(i.$loading,!0),i.searchVal?i.searchAddress():i.nearbyData?i.formatAddress(i.nearbyData,null,"nearby"):i.searchAddress()},blur:function(){t&&clearTimeout(t),t=setTimeout(function(){i.toggleShow(i.$nearbyAddr,!1),i.toggleShow(i.$searchAddr,!1),i.toggleShow(i.$noResult,!1),i.toggleShow(i.$myAddr,!0),$(".J_switchTypeTrigger").eq(0).show()},200)},keyup:function(){e&&clearTimeout(e),e=setTimeout(function(){i.searchVal=$.trim(i.$input.val().replace(/[\-_'=+|\\\/]/g," ")),i.searchVal?i.toggleShow(i.$inputClear,!0):i.toggleShow(i.$inputClear,!1),i.toggleShow(i.$myAddr,!1),i.toggleShow(i.$nearbyAddr,!1),i.toggleShow(i.$searchAddr,!1),i.toggleShow(i.$noResult,!1),i.toggleShow(i.$loading,!0),i.searchAddress()},a)}}),i.$inputClear.on("click",function(){i.searchVal=null,i.$input.val("").focus(),i.toggleShow(i.$inputClear,!1)})},selectEvent:function(){var e=this;e.$myAddrList.on("click",".J_addrItem",function(){var t=$(this).index();e.myData[t].address_id={id:$(this).data("id")},delete e.myData[t].consignee,e.formatChooseResult(e.myData[t])}),$.each([e.$nearbyAddrList,e.$searchAddrList],function(t,i){i.on("click",".J_addrItem",function(){var t=$(this).attr("data-code"),i=$(this).attr("data-location");e.translateSearchResult({code:t,location:i})})})},toggleShow:function(e,t){t?e.removeClass("hide"):e.addClass("hide")},switchType:function(){$(".J_switchTypeTrigger").on("click",function(){var e=$(this).attr("data-type");e&&$(".J_chooseRegionsBox[data-type="+e+"]").removeClass("hide").siblings(".J_chooseRegionsBox").addClass("hide")})},getDefaultAddress:function(){var e=this,t={url:e.apiUrl["default"],dataType:"jsonp",jsonp:"jsonpcallback",timeout:3e4,cache:!0,error:function(){},success:function(t){t&&1===t.code&&e.formatChooseResult(t.data,!0)}};window.ref_goods&&(t.data={},t.data.ref_goods=window.ref_goods),$.ajax(t)},getMyAddress:function(){var e=this;return e.isLogin?void(e.myData||$.ajax({url:e.apiUrl.my,dataType:"jsonp",jsonp:"jsonpcallback",timeout:3e4,cache:!0,error:function(){},success:function(t){t&&1===t.code?(e.myData=t.data,e.formatAddress(t.data,e.myAddressPage,"my")):-2===t.code&&(e.toggleShow(e.$loading,!1),e.toggleShow(e.$myAddr,!0))}})):(e.toggleShow(e.$loading,!1),void e.toggleShow(e.$myAddr,!0))},searchAddress:function(){var e=this,t=e.searchVal?"search":"nearby";$.ajax({url:e.apiUrl.search,dataType:"jsonp",jsonp:"jsonpcallback",data:{keywords:e.searchVal},timeout:3e4,cache:!0,error:function(){},success:function(i){if(i&&1===i.code){if(!i.data||!i.data.length)return e.toggleShow(e.$loading,!1),void("search"===t&&(e.toggleShow(e.$noResult,!0),$(".J_switchTypeTrigger").eq(0).hide()));e.searchVal||(e.nearbyData=i.data),e.formatAddress(i.data.slice(0,5),null,t)}}})},formatAddress:function(e,t,i){if(e){var a=this,s=multiline(function(){/*!@tpl
	        {{~it :value:index}}
	            <li class="J_addrItem" data-id="{{=value.address_id}}">
	                <div class="address-title">
	                    <span class="item">{{=value.consignee}}</span>
	                    <span class="item">{{=value.province.name}}</span>
	                </div>
	                <div class="address-desc">
	                    {{=value.city.name}}{{=value.district.name}}{{=value.area.name}}
	                </div>
	            </li>
	        {{~}}
	        */
console.log()}),n=multiline(function(){/*!@tpl
	        {{~it :value:index}}
	            <li class="J_addrItem" data-code="{{=value.adcode ? value.adcode : ''}}"
	            data-location="{{=value.location}}" data-id="{{=value.address_id}}">
	                <div class="address-title">
	                    <span class="item">{{=value.name}}</span>
	                </div>
	                <div class="address-desc">
	                    {{=value.pname}}{{=value.cityname}}{{=value.adname}}
	                </div>
	                <a class="btn btn-primary">选择</a>
	            </li>
	        {{~}}
	        */
console.log()}),o="";a.toggleShow(a.$loading,!1),a.toggleShow(a.$myAddr,!1),a.toggleShow(a.$noResult,!1),i&&"my"===i?(o=doT.template(s)(e),a.$myAddrList.html(o),a.toggleShow(a.$noLogin,!1),a.toggleShow(a.$myAddr,!0)):"nearby"===i?(o=doT.template(n)(e),a.$nearbyAddrList.html(o),a.toggleShow(a.$nearbyAddr,!0)):"search"===i&&(o=doT.template(n)(e),a.$searchAddrList.html(o),a.toggleShow(a.$searchAddr,!0)),"function"==typeof t&&$.proxy(t,a)()}},myAddressPage:function(){function e(){s.$myAddrList.css({"margin-top":h*(l-1)*-1+"px"}),a.text(l)}var t,i,a,s=this,n=s.$myAddrList.find(".J_addrItem"),o=n.length,r=4,d=o%r>0?parseInt(o/r)+1:o/r,l=1,c=multiline(function(){/*!@tpl
	          <div class="page-controller">
	              <a href="javascript:void(0);" class="iconfont page-prev">&#xe629;</a>
	              <span class="page-num"><i class="curr">{{=it.curr}}</i> / <i class="total">{{=it.total}}</i></span>
	              <a href="javascript:void(0);" class="iconfont page-next">&#xe624;</a>
	          </div>
	        */
console.log()}),p="",h=2*n.outerHeight();1>=d||(s.$myAddrList.parent().css({height:h,overflow:"hidden"}),p=doT.template(c)({curr:l,total:d}),s.$myAddr.append(p),a=s.$myAddr.find(".curr"),i=s.$myAddr.find(".page-next"),t=s.$myAddr.find(".page-prev"),t.on("click",function(){l>1&&(l-=1),e()}),i.on("click",function(){d>l&&(l+=1),e()}))},translateSearchResult:function(e){var t=this;$.ajax({url:t.apiUrl.translate,dataType:"jsonp",jsonp:"jsonpcallback",data:{adcode:e.code,location:e.location},timeout:3e4,error:function(){},success:function(e){e&&1===e.code&&t.formatChooseResult(e.data)}})},isjson:function(e){return"object"!=typeof e||"[object object]"!==Object.prototype.toString.call(e).toLowerCase()||e.length?!1:!0},formatChooseResult:function(e,t){var i=this,a="",s=[],n="";$.each(e,function(e,t){"mihome_id"===e?(n=t,i.options.mihomeId=t):"address_id"===e?s.push({id:t.id}):i.isjson(t)&&s.push({id:t.id,name:t.name})}),t||i.saveResult(s),$.each(s,function(e,t){!i.options.isShowStreet&&e>=4||t.name&&(a+='<span class="item">'+t.name+"</span>")}),i.$userDefault.removeClass("hide").find(".address-info").html(a),"function"==typeof i.options.afterChoose&&i.options.afterChoose(s,n)},saveResult:function(e){var t=this,i={};i=e.length>4?{address_id:{id:e[0].id||""},province:{id:e[1].id,name:e[1].name},city:{id:e[2].id,name:e[2].name},district:{id:e[3].id,name:e[3].name},area:{id:e[4].id,name:e[4].name}}:{province:{id:e[0].id,name:e[0].name},city:{id:e[1].id,name:e[1].name},district:{id:e[2].id,name:e[2].name},area:{id:e[3].id,name:e[3].name}},$.ajax({url:t.apiUrl.save,dataType:"jsonp",jsonp:"jsonpcallback",data:{address:i},timeout:3e4,error:function(){},success:function(){}})}}},function(e,t){MI.namespace("fourAddress"),MI.fourAddress=function(){this.options={wrapperElm:"#J_selectAddressWrapper",optionsWrapper:".J_optionsWrapper",selectWrapper:"#J_selectWrapper",maxLevel:4,afterFormat:$.noop,selectEnd:$.noop}},MI.fourAddress.prototype={constructor:MI.fourAddress,init:function(e){var t=this;"object"==typeof e&&(t.options=$.extend(t.options,e)),t.$wrapper=$(t.options.wrapperElm),t.$wrapper.length&&(t.addrUrl="//s1.mi.com/open/common/js/address_all_new.js?v=7930814",t.addressData=[],t.addrTemp=multiline(function(){/*!@tpl
	          <div class="select-box clearfix" id="J_selectWrapper">
	              <div class="select-first select-item J_select" data-init-txt="选择省份/自治区">选择省份/自治区</div>
	              <div class="select-item J_select hide" data-init-txt="选择城市/地区"></div>
	              <div class="select-item J_select hide" data-init-txt="选择区县"></div>
	              <div class="select-last select-item J_select hide" data-init-txt="选择配送区域"></div>
	          </div>

	          <div class="options-box">
	              <ul class="options-list J_optionsWrapper clearfix">
	                  {{~it :value:index}}
	                      <li class="option J_option"
	                      data-value="{{=value.id}}"
	                      data-txt="{{=value.name}}">{{=value.name}}
	                      </li>
	                  {{~}}
	              </ul>
	              <ul class="options-list J_optionsWrapper clearfix hide"></ul>
	              <ul class="options-list J_optionsWrapper clearfix hide"></ul>
	              <ul class="options-list J_optionsWrapper clearfix hide"></ul>
	          </div>
	        */
console.log()}),t.optionTemp=multiline(function(){/*!@tpl
	          {{~it :value:index}}
	            {{? value.region_id}}
	            <li class="J_option" data-txt="{{=value.region_name}}" data-value="{{=value.region_id}}">
	            {{=value.region_name}}</li>
	            {{?? }}
	            <li class="J_option" data-txt="{{=value.name}}" data-value="{{=value.id}}"
	            data-zipcode="{{=value.zipcode ? value.zipcode : ''}}">{{=value.name}}</li>
	            {{? }}
	          {{~}}
	        */
console.log()}),t.result={},t.lastLevel=t.options.maxLevel-1,t.getAllRegions())},getAllRegions:function(){var e=this;$.ajax({url:e.addrUrl,dataType:"script",cache:!0,timeout:3e4,error:function(){},success:function(){"undefined"!=typeof window.data&&(e.addressData=window.data),e.formatRegions()}})},formatRegions:function(){var e=this,t=doT.template(e.addrTemp),i=t(e.addressData);e.$wrapper.html(i),e.$optionsWrapper=e.$wrapper.find(e.options.optionsWrapper),e.$selectWrapper=e.$wrapper.find(e.options.selectWrapper),e.selectEvent(),"function"==typeof e.options.afterFormat&&e.options.afterFormat()},selectEvent:function(){var e=this,t=0;e.$selectWrapper.on("click.seladdr",".J_select",function(){var i=$(this).addClass("active"),a=$(this).attr("data-init-txt");i&&(t=$(this).index(),e.$selectWrapper.find(".J_select:gt("+t+")").addClass("hide").removeClass("active"),e.$optionsWrapper.addClass("hide").eq(t).removeClass("hide"),$(this).html(a).removeClass("active"))}),e.$optionsWrapper.on("click.seladdr",".J_option",function(){var i=parseInt($(this).attr("data-value")),a=$(this).attr("data-txt"),s=$(this).attr("data-zipcode")||"",n=t+1,o=e.$selectWrapper.find(".J_select").eq(n);return e.result[t]={id:i,name:a,zcode:s},e.$selectWrapper.find(".J_select").eq(t).html(a).addClass("active"),t===e.lastLevel?void("function"==typeof e.options.selectEnd&&e.options.selectEnd(e.result)):(t+=1,n>=e.lastLevel?e.getLastLevelData():e.formatNextLevelOption(i,n),void(o.length&&o.html(o.attr("data-init-txt")).removeClass("hide")))})},getAddressLevelData:function(e){var t=[],i=this;return $.each(i.addressData,function(i,a){return a.id===e?(t=a.child,!1):void(a.child&&$.each(a.child,function(i,a){return a.id===e?(t=a.child,!1):void(a.child&&$.each(a.child,function(i,a){return a.id===e?(t=a.tags,!1):void 0}))}))}),t},formatNextLevelOption:function(e,t){if(e){var i=this,a=i.getAddressLevelData(e,t),s=i.formatOption(a);i.$optionsWrapper.addClass("hide").eq(t).html(s).removeClass("hide"),1===a.length&&setTimeout(function(){i.$optionsWrapper.eq(t).find(".J_option").eq(0).trigger("click")},50)}},getLastLevelData:function(){var e=this,t=MI.GLOBAL_CONFIG.orderSite+"/api/getAddressRegion.php";e.$optionsWrapper.addClass("hide").eq(e.lastLevel).html('<div class="loading"><div class="loader"></div></div>').removeClass("hide"),$.ajax({url:t,dataType:"jsonp",jsonp:"jsonpcallback",data:{parent:e.result[2].id},tiemout:3e4,error:function(){},success:function(t){if(t&&t.data.regions){var i=[];$.each(t.data.regions,function(e,t){i.push(t)});var a=e.formatOption(i);e.$optionsWrapper.eq(e.lastLevel).html(a)}}})},formatOption:function(e){var t=this,i="";return e?i=doT.template(t.optionTemp)(e):void 0},getResult:function(){return this.result}}},function(e,t,i){MI.proNav=function(e){if(0!==$("#J_proHeader").length){var t=i(9),a=$("#J_proHeader").find("h2").text();$("#J_proHeader").html(t(a)),window.tarList=[];var s=window.tarList,n=function(){var e=$(window).scrollTop();for(var t in s)if(s.hasOwnProperty(t)){var i=s[t],a=i.top;e>a?i.callback(i,e):i.reverse&&i.reverse(i,e)}};$(window).on("scroll",function(){n()}),0===$(".J_miOneScroller").length&&$("html,body").animate({scrollTop:1===$("#J_proHeader").length?$("#J_proHeader").offset().top:140},1e3),e=e||{};var o={id:e.id?e.id:"",target:e.target?e.target:""},r=function(){var e=140;1===$("#J_proHeader").length&&(e=$("#J_proHeader").offset().top+$("#J_proHeader").height());var t=e;s.push({top:t,callback:function(){$("#J_fixNarBar").addClass("nav_fix")},reverse:function(){$("#J_fixNarBar").removeClass("nav_fix")}})},d={};o.id?d.product_id=o.id:d.url="http://"+window.location.host+window.location.pathname,$.ajax({type:"GET",url:MI.GLOBAL_CONFIG.orderSite+"/product/gettabinfo",data:d,dataType:"jsonp",jsonp:"jsonpcallback",timeout:1e4,success:function(e){if(1===e.code&&(e=e.data,e.link)){e.link.id=o.id||e.link.product_id,e.link.target=o.target,e.link.domain=MI.GLOBAL_CONFIG.itemSite,e.link.url="//"+window.location.host+window.location.pathname;var t=i(10);if($(".J_navSwitch").find(".con").html(t(e.link)),$(".J_buyBtn").attr("href",MI.GLOBAL_CONFIG.itemSite+"/product/"+e.link.id+".html"),r(),e.link.qrcode_list){var a=$("#J_mpQrcode"),s=$("#J_mpQrcodeTmp");if(a.length>0&&s.length>0){var n=doT.template(s.html());a.html(n(e.link))}}}}})}}},function(e,t){e.exports=function(e){var t='<div class="xm-product-box"> <div class="nav-bar" id="J_headNav"> <div class="container J_navSwitch"> <h2 class="J_proName">'+e+'</h2> <div class="con"></div> </div> </div></div><div class="xm-product-box nav-bar-hidden" id="J_fixNarBar"> <div class="nav-bar" > <div class="container J_navSwitch"> <h2 class="J_proName">'+e+'</h2> <div class="con"></div> </div> </div></div>';return t}},function(e,t){e.exports=function(e){var t="";if(e.left&&e.left.length>0){t+='<div class="left"> ';var i=e.left;if(i)for(var a,s=-1,n=i.length-1;n>s;){a=i[s+=1],t+=" ";var o=a.url.replace(/^http:\/\/|^https:\/\//g,"//");t+=' <span class="separator">|</span> ',o===e.url?t+=' <a  href="javascript:void(0);" class="cur" >'+a.title+"</a> ":(t+=' <a  href="'+o+'" ',a.is_new_page&&(t+='target="_blank"'),t+=">"+a.title+"</a> "),t+=" "}t+="</div>"}if(t+='<div class="right">',e.right&&e.right.length>0){t+=" ";var r=e.right;if(r)for(var a,s=-1,d=r.length-1;d>s;){a=r[s+=1],t+=" ";var o=a.url.replace(/^http:\/\/|^https:\/\//g,"//");t+=" ",o===e.url?t+=' <a  href="javascript:void(0);" class="cur" >'+a.title+"</a> ":(t+=' <a  href="'+o+'" ',a.is_new_page&&(t+='target="_blank"'),t+=">"+a.title+"</a> "),t+=' <span class="separator">|</span> '}}return e.id&&(t+=" ","buy"===e.target&&(t+=' <a href="'+e.domain+"/comment/"+e.id+'.html">用户评价</a> '),t+=" ","comment"===e.target&&(t+=' <a href="javascript:void(0);" class="cur">用户评价</a> <a href="'+e.domain+"/product/"+e.id+'.html" class="btn btn-small btn-primary" >立即购买</a> '),t+=" ","buy"!==e.target&&"comment"!==e.target&&(t+=' <a href="'+e.domain+"/comment/"+e.id+'.html" >用户评价</a> <a href="'+e.domain+"/product/"+e.id+'.html" class="btn btn-small btn-primary" >立即购买</a> ')),t+="</div>"}},function(e,t,i){MI.alert=function(e){var t,a,s={msg:"温馨提示",isConfirm:!1,onCancel:$.noop,onConfirm:$.noop},n=$.extend(s,e),o=i(12),r=$("#J_miAlert");n.msg&&(r.length||($("body").append(o),r=$("#J_miAlert")),t=r.find("#J_miAlertCancel"),a=r.find("#J_miAlertConfirm"),n.isConfirm?("function"==typeof n.onCancel&&t.on("click",n.onCancel),"function"==typeof n.onConfirm&&a.on("click",n.onConfirm)):t.remove(),r.find("#J_miAlertMsg").html(n.msg),r.modal("show"))}},function(e,t){e.exports=function(e){var t='<div class="modal fade modal-hide  modal-alert" id="J_miAlert" > <a class="close" data-dismiss="modal"  href="javascript: void(0);"><i class="iconfont">&#xe602;</i></a> <div class="modal-bd"> <div class="text"> <h3 id="J_miAlertMsg"></h3> </div> <div class="actions"> <button class="btn btn-gray" data-dismiss="modal" id="J_miAlertCancel">取消</button> <button class="btn btn-primary"  data-dismiss="modal" id="J_miAlertConfirm">确定</button> </div> </div></div>';return t}},function(e,t){!function(e){var t={},a={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"ui-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"下一张",prevText:"上一张",nextSelector:null,prevSelector:null,autoControls:!1,startText:"开始",stopText:"停止",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:e.noop,onSlideBefore:e.noop,onSlideAfter:e.noop,onSlideNext:e.noop,onSlidePrev:e.noop,onSliderResize:e.noop};e.fn.slider=function(s){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).slider(s)}),this;var n={},o=this;t.el=this;var r=e(window).width(),d=e(window).height(),l=function(){n.settings=e.extend({},a,s),n.settings.slideWidth=parseInt(n.settings.slideWidth),n.children=o.children(n.settings.slideSelector),n.children.length<n.settings.minSlides&&(n.settings.minSlides=n.children.length),n.children.length<n.settings.maxSlides&&(n.settings.maxSlides=n.children.length),n.settings.randomStart&&(n.settings.startSlide=Math.floor(Math.random()*n.children.length)),n.active={index:n.settings.startSlide},n.carousel=n.settings.minSlides>1||n.settings.maxSlides>1,n.carousel&&(n.settings.preloadImages="all"),n.minThreshold=n.settings.minSlides*n.settings.slideWidth+(n.settings.minSlides-1)*n.settings.slideMargin,n.maxThreshold=n.settings.maxSlides*n.settings.slideWidth+(n.settings.maxSlides-1)*n.settings.slideMargin,n.working=!1,n.controls={},n.interval=null,n.animProp="vertical"==n.settings.mode?"top":"left",n.usingCSS=n.settings.useCSS&&"fade"!=n.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return n.cssPrefix=t[i].replace("Perspective","").toLowerCase(),n.animProp="-"+n.cssPrefix+"-transform",!0;return!1}(),"vertical"==n.settings.mode&&(n.settings.maxSlides=n.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(n.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),c()},c=function(){o.wrap('<div class="'+n.settings.wrapperClass+'"><div class="ui-viewport"></div></div>'),n.viewport=o.parent(),n.loader=e('<div class="ui-loading" />'),n.viewport.prepend(n.loader),o.css({width:"horizontal"==n.settings.mode?100*n.children.length+215+"%":"auto",position:"relative"}),n.usingCSS&&n.settings.easing?o.css("-"+n.cssPrefix+"-transition-timing-function",n.settings.easing):n.settings.easing||(n.settings.easing="swing");m();n.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),n.viewport.parent().css({maxWidth:g()}),n.settings.pager||n.viewport.parent().css({margin:"0 auto 0px"}),n.children.css({"float":"horizontal"==n.settings.mode?"left":"none",listStyle:"none",position:"relative"}),n.children.css("width",f()),"horizontal"==n.settings.mode&&n.settings.slideMargin>0&&n.children.css("marginRight",n.settings.slideMargin),"vertical"==n.settings.mode&&n.settings.slideMargin>0&&n.children.css("marginBottom",n.settings.slideMargin),"fade"==n.settings.mode&&(n.children.css({position:"absolute",zIndex:0,display:"none"}),n.children.eq(n.settings.startSlide).css({zIndex:n.settings.slideZIndex,display:"block"})),n.controls.el=e('<div class="ui-controls" />'),n.settings.captions&&w(),n.active.last=n.settings.startSlide==v()-1,n.settings.video&&o.fitVids();var t=n.children.eq(n.settings.startSlide);"all"==n.settings.preloadImages&&(t=n.children),n.settings.ticker?n.settings.pager=!1:(n.settings.pager&&k(),n.settings.controls&&$(),n.settings.auto&&n.settings.autoControls&&C(),(n.settings.controls||n.settings.autoControls||n.settings.pager)&&n.viewport.after(n.controls.el)),p(t,h)},p=function(t,i){var a=t.find("img, iframe").length;if(0==a)return void i();var s=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++s==a&&i()}).each(function(){this.complete&&e(this).load()})})},h=function(){if(n.settings.infiniteLoop&&"fade"!=n.settings.mode&&!n.settings.ticker){var t="vertical"==n.settings.mode?n.settings.minSlides:n.settings.maxSlides,i=n.children.slice(0,t).clone().addClass("ui-clone"),a=n.children.slice(-t).clone().addClass("ui-clone");o.append(i).prepend(a)}n.loader.remove(),b(),"vertical"==n.settings.mode&&(n.settings.adaptiveHeight=!0),n.viewport.height(u()),o.redrawSlider(),n.settings.onSliderLoad(n.active.index),n.initialized=!0,n.settings.responsive&&e(window).bind("resize",R),n.settings.auto&&n.settings.autoStart&&(v()>1||n.settings.autoSlideForOnePage)&&j(),n.settings.ticker&&P(),n.settings.pager&&L(n.settings.startSlide),n.settings.controls&&M(),n.settings.touchEnabled&&!n.settings.ticker&&O()},u=function(){var t=0,a=e();if("vertical"==n.settings.mode||n.settings.adaptiveHeight)if(n.carousel){var s=1==n.settings.moveSlides?n.active.index:n.active.index*_();for(a=n.children.eq(s),i=1;i<=n.settings.maxSlides-1;i++)a=a.add(s+i>=n.children.length?n.children.eq(i-1):n.children.eq(s+i))}else a=n.children.eq(n.active.index);else a=n.children;return"vertical"==n.settings.mode?(a.each(function(i){t+=e(this).outerHeight()}),n.settings.slideMargin>0&&(t+=n.settings.slideMargin*(n.settings.minSlides-1))):t=Math.max.apply(Math,a.map(function(){return e(this).outerHeight(!1)}).get()),"border-box"==n.viewport.css("box-sizing")?t+=parseFloat(n.viewport.css("padding-top"))+parseFloat(n.viewport.css("padding-bottom"))+parseFloat(n.viewport.css("border-top-width"))+parseFloat(n.viewport.css("border-bottom-width")):"padding-box"==n.viewport.css("box-sizing")&&(t+=parseFloat(n.viewport.css("padding-top"))+parseFloat(n.viewport.css("padding-bottom"))),t},g=function(){var e="100%";return n.settings.slideWidth>0&&(e="horizontal"==n.settings.mode?n.settings.maxSlides*n.settings.slideWidth+(n.settings.maxSlides-1)*n.settings.slideMargin:n.settings.slideWidth),e},f=function(){var e=n.settings.slideWidth,t=n.viewport.width();return 0==n.settings.slideWidth||n.settings.slideWidth>t&&!n.carousel||"vertical"==n.settings.mode?e=t:n.settings.maxSlides>1&&"horizontal"==n.settings.mode&&(t>n.maxThreshold||t<n.minThreshold&&(e=(t-n.settings.slideMargin*(n.settings.minSlides-1))/n.settings.minSlides)),e},m=function(){var e=1;if("horizontal"==n.settings.mode&&n.settings.slideWidth>0)if(n.viewport.width()<n.minThreshold)e=n.settings.minSlides;else if(n.viewport.width()>n.maxThreshold)e=n.settings.maxSlides;else{var t=n.children.first().width()+n.settings.slideMargin;e=Math.floor((n.viewport.width()+n.settings.slideMargin)/t)}else"vertical"==n.settings.mode&&(e=n.settings.minSlides);return e},v=function(){var e=0;if(n.settings.moveSlides>0)if(n.settings.infiniteLoop)e=Math.ceil(n.children.length/_());else for(var t=0,i=0;t<n.children.length;)++e,t=i+m(),i+=n.settings.moveSlides<=m()?n.settings.moveSlides:m();else e=Math.ceil(n.children.length/m());return e},_=function(){return n.settings.moveSlides>0&&n.settings.moveSlides<=m()?n.settings.moveSlides:m()},b=function(){if(n.children.length>n.settings.maxSlides&&n.active.last&&!n.settings.infiniteLoop){if("horizontal"==n.settings.mode){var e=n.children.last(),t=e.position();y(-(t.left-(n.viewport.width()-e.outerWidth())),"reset",0)}else if("vertical"==n.settings.mode){var i=n.children.length-n.settings.minSlides,t=n.children.eq(i).position();y(-t.top,"reset",0)}}else{var t=n.children.eq(n.active.index*_()).position();n.active.index==v()-1&&(n.active.last=!0),void 0!=t&&("horizontal"==n.settings.mode?y(-t.left,"reset",0):"vertical"==n.settings.mode&&y(-t.top,"reset",0))}},y=function(e,t,i,a){if(n.usingCSS){var s="vertical"==n.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";o.css("-"+n.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(o.css(n.animProp,s),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),B()})):"reset"==t?o.css(n.animProp,s):"ticker"==t&&(o.css("-"+n.cssPrefix+"-transition-timing-function","linear"),o.css(n.animProp,s),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),y(a.resetValue,"reset",0),F()}))}else{var r={};r[n.animProp]=e,"slide"==t?o.animate(r,i,n.settings.easing,function(){B()}):"reset"==t?o.css(n.animProp,e):"ticker"==t&&o.animate(r,speed,"linear",function(){y(a.resetValue,"reset",0),F()})}},x=function(){for(var t="",i=v(),a=0;i>a;a++){var s="";n.settings.buildPager&&e.isFunction(n.settings.buildPager)?(s=n.settings.buildPager(a),n.pagerEl.addClass("ui-custom-pager")):(s=a+1,n.pagerEl.addClass("ui-default-pager")),t+='<div class="ui-pager-item"><a href="" data-slide-index="'+a+'" class="ui-pager-link">'+s+"</a></div>"}n.pagerEl.html(t)},k=function(){n.settings.pagerCustom?n.pagerEl=e(n.settings.pagerCustom):(n.pagerEl=e('<div class="ui-pager" />'),n.settings.pagerSelector?e(n.settings.pagerSelector).html(n.pagerEl):n.controls.el.addClass("ui-has-pager").append(n.pagerEl),x()),n.pagerEl.on("click","a",T)},$=function(){n.controls.next=e('<a class="ui-next" href="">'+n.settings.nextText+"</a>"),n.controls.prev=e('<a class="ui-prev" href="">'+n.settings.prevText+"</a>"),n.controls.next.bind("click",S),n.controls.prev.bind("click",J),n.settings.nextSelector&&e(n.settings.nextSelector).append(n.controls.next),n.settings.prevSelector&&e(n.settings.prevSelector).append(n.controls.prev),n.settings.nextSelector||n.settings.prevSelector||(n.controls.directionEl=e('<div class="ui-controls-direction" />'),n.controls.directionEl.append(n.controls.prev).append(n.controls.next),n.controls.el.addClass("ui-has-controls-direction").append(n.controls.directionEl))},C=function(){n.controls.start=e('<div class="ui-controls-auto-item"><a class="ui-start" href="">'+n.settings.startText+"</a></div>"),n.controls.stop=e('<div class="ui-controls-auto-item"><a class="ui-stop" href="">'+n.settings.stopText+"</a></div>"),n.controls.autoEl=e('<div class="ui-controls-auto" />'),n.controls.autoEl.on("click",".ui-start",A),n.controls.autoEl.on("click",".ui-stop",I),n.settings.autoControlsCombine?n.controls.autoEl.append(n.controls.start):n.controls.autoEl.append(n.controls.start).append(n.controls.stop),n.settings.autoControlsSelector?e(n.settings.autoControlsSelector).html(n.controls.autoEl):n.controls.el.addClass("ui-has-controls-auto").append(n.controls.autoEl),D(n.settings.autoStart?"stop":"start")},w=function(){n.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!=i&&(""+i).length&&e(this).append('<div class="ui-caption"><span>'+i+"</span></div>")})},S=function(e){n.settings.auto&&o.stopAuto(),o.goToNextSlide(),e.preventDefault()},J=function(e){n.settings.auto&&o.stopAuto(),o.goToPrevSlide(),e.preventDefault()},A=function(e){o.startAuto(),e.preventDefault()},I=function(e){o.stopAuto(),e.preventDefault()},T=function(t){var i=e(t.currentTarget);if(void 0!==i.attr("data-slide-index")){var a=parseInt(i.attr("data-slide-index"));a!=n.active.index&&(n.settings.auto&&o.stopAuto(),o.goToSlide(a)),t.preventDefault()}},L=function(t){var i=n.children.length;return"short"==n.settings.pagerType?(n.settings.maxSlides>1&&(i=Math.ceil(n.children.length/n.settings.maxSlides)),void n.pagerEl.html(t+1+n.settings.pagerShortSeparator+i)):(n.pagerEl.find("a").removeClass("active"),void n.pagerEl.each(function(i,a){e(a).find("a").eq(t).addClass("active")}))},B=function(){if(n.settings.infiniteLoop){var e="";0==n.active.index?e=n.children.eq(0).position():n.active.index==v()-1&&n.carousel?e=n.children.eq((v()-1)*_()).position():n.active.index==n.children.length-1&&(e=n.children.eq(n.children.length-1).position()),e&&("horizontal"==n.settings.mode?y(-e.left,"reset",0):"vertical"==n.settings.mode&&y(-e.top,"reset",0))}n.working=!1,n.settings.onSlideAfter(n.children.eq(n.active.index),n.oldIndex,n.active.index)},D=function(e){n.settings.autoControlsCombine?n.controls.autoEl.html(n.controls[e]):(n.controls.autoEl.find("a").removeClass("active"),n.controls.autoEl.find("a:not(.ui-"+e+")").addClass("active"))},M=function(){1==v()?(n.controls.prev.addClass("disabled"),n.controls.next.addClass("disabled")):!n.settings.infiniteLoop&&n.settings.hideControlOnEnd&&(0==n.active.index?(n.controls.prev.addClass("disabled"),n.controls.next.removeClass("disabled")):n.active.index==v()-1?(n.controls.next.addClass("disabled"),n.controls.prev.removeClass("disabled")):(n.controls.prev.removeClass("disabled"),n.controls.next.removeClass("disabled")))},j=function(){if(n.settings.autoDelay>0){setTimeout(o.startAuto,n.settings.autoDelay)}else o.startAuto();n.settings.autoHover&&o.hover(function(){n.interval&&(o.stopAuto(!0),n.autoPaused=!0)},function(){n.autoPaused&&(o.startAuto(!0),n.autoPaused=null)})},P=function(){var t=0;if("next"==n.settings.autoDirection)o.append(n.children.clone().addClass("ui-clone"));else{o.prepend(n.children.clone().addClass("ui-clone"));var i=n.children.first().position();t="horizontal"==n.settings.mode?-i.left:-i.top}y(t,"reset",0),n.settings.pager=!1,n.settings.controls=!1,n.settings.autoControls=!1,n.settings.tickerHover&&!n.usingCSS&&n.viewport.hover(function(){o.stop()},function(){var t=0;n.children.each(function(i){t+="horizontal"==n.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=n.settings.speed/t,a="horizontal"==n.settings.mode?"left":"top",s=i*(t-Math.abs(parseInt(o.css(a))));F(s)}),F()},F=function(e){speed=e?e:n.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==n.settings.autoDirection?t=o.find(".ui-clone").first().position():i=n.children.first().position();var a="horizontal"==n.settings.mode?-t.left:-t.top,s="horizontal"==n.settings.mode?-i.left:-i.top,r={resetValue:s};y(a,"ticker",speed,r)},O=function(){n.touch={start:{x:0,y:0},end:{x:0,y:0}},n.viewport.bind("touchstart",G)},G=function(e){if(n.working)e.preventDefault();else{n.touch.originalPos=o.position();var t=e.originalEvent;n.touch.start.x=t.changedTouches[0].pageX,n.touch.start.y=t.changedTouches[0].pageY,n.viewport.bind("touchmove",E),n.viewport.bind("touchend",N)}},E=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-n.touch.start.x),a=Math.abs(t.changedTouches[0].pageY-n.touch.start.y);if(3*i>a&&n.settings.preventDefaultSwipeX?e.preventDefault():3*a>i&&n.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=n.settings.mode&&n.settings.oneToOneTouch){var s=0;if("horizontal"==n.settings.mode){var o=t.changedTouches[0].pageX-n.touch.start.x;s=n.touch.originalPos.left+o}else{var o=t.changedTouches[0].pageY-n.touch.start.y;s=n.touch.originalPos.top+o}y(s,"reset",0)}},N=function(e){n.viewport.unbind("touchmove",E);var t=e.originalEvent,i=0;if(n.touch.end.x=t.changedTouches[0].pageX,n.touch.end.y=t.changedTouches[0].pageY,"fade"==n.settings.mode){var a=Math.abs(n.touch.start.x-n.touch.end.x);a>=n.settings.swipeThreshold&&(n.touch.start.x>n.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())}else{var a=0;"horizontal"==n.settings.mode?(a=n.touch.end.x-n.touch.start.x,i=n.touch.originalPos.left):(a=n.touch.end.y-n.touch.start.y,i=n.touch.originalPos.top),!n.settings.infiniteLoop&&(0==n.active.index&&a>0||n.active.last&&0>a)?y(i,"reset",200):Math.abs(a)>=n.settings.swipeThreshold?(0>a?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):y(i,"reset",200)}n.viewport.unbind("touchend",N)},R=function(t){if(n.initialized){var i=e(window).width(),a=e(window).height();(r!=i||d!=a)&&(r=i,d=a,o.redrawSlider(),n.settings.onSliderResize.call(o,n.active.index))}};return o.goToSlide=function(t,i){if(!n.working&&n.active.index!=t){if(n.working=!0,n.oldIndex=n.active.index,n.active.index=0>t?v()-1:t>=v()?0:t,n.settings.onSlideBefore(n.children.eq(n.active.index),n.oldIndex,n.active.index),"next"==i?n.settings.onSlideNext(n.children.eq(n.active.index),n.oldIndex,n.active.index):"prev"==i&&n.settings.onSlidePrev(n.children.eq(n.active.index),n.oldIndex,n.active.index),n.active.last=n.active.index>=v()-1,n.settings.pager&&L(n.active.index),n.settings.controls&&M(),"fade"==n.settings.mode)n.settings.adaptiveHeight&&n.viewport.height()!=u()&&n.viewport.animate({height:u()},n.settings.adaptiveHeightSpeed),n.children.filter(":visible").fadeOut(n.settings.speed).css({zIndex:0}),n.children.eq(n.active.index).css("zIndex",n.settings.slideZIndex+1).fadeIn(n.settings.speed,function(){e(this).css("zIndex",n.settings.slideZIndex),B()});else{n.settings.adaptiveHeight&&n.viewport.height()!=u()&&n.viewport.animate({height:u()},n.settings.adaptiveHeightSpeed);var a=0,s={left:0,top:0};if(!n.settings.infiniteLoop&&n.carousel&&n.active.last)if("horizontal"==n.settings.mode){var r=n.children.eq(n.children.length-1);s=r.position(),a=n.viewport.width()-r.outerWidth()}else{var d=n.children.length-n.settings.minSlides;s=n.children.eq(d).position()}else if(n.carousel&&n.active.last&&"prev"==i){var l=1==n.settings.moveSlides?n.settings.maxSlides-_():(v()-1)*_()-(n.children.length-n.settings.maxSlides),r=o.children(".ui-clone").eq(l);s=r.position()}else if("next"==i&&0==n.active.index)s=o.find("> .ui-clone").eq(n.settings.maxSlides).position(),n.active.last=!1;else if(t>=0){var c=t*_();s=n.children.eq(c).position()}if("undefined"!=typeof s){var p="horizontal"==n.settings.mode?-(s.left-a):-s.top;y(p,"slide",n.settings.speed)}}n.settings.auto&&o.startAuto()}},o.goToNextSlide=function(){if(n.settings.infiniteLoop||!n.active.last){var e=parseInt(n.active.index)+1;o.goToSlide(e,"next")}},o.goToPrevSlide=function(){if(n.settings.infiniteLoop||0!=n.active.index){var e=parseInt(n.active.index)-1;o.goToSlide(e,"prev")}},o.startAuto=function(e){n.interval||(n.interval=setInterval(function(){"next"==n.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},n.settings.pause),n.settings.autoControls&&1!=e&&D("stop"))},o.stopAuto=function(e){n.interval&&(clearInterval(n.interval),n.interval=null,n.settings.autoControls&&1!=e&&D("start"))},o.getCurrentSlide=function(){return n.active.index},o.getCurrentSlideElement=function(){return n.children.eq(n.active.index)},o.getSlideCount=function(){return n.children.length},o.redrawSlider=function(){n.children.add(o.find(".ui-clone")).width(f()),n.viewport.css("height",u()),n.settings.ticker||b(),n.active.last&&(n.active.index=v()-1),n.active.index>=v()&&(n.active.last=!0),n.settings.pager&&!n.settings.pagerCustom&&(x(),L(n.active.index))},o.destroySlider=function(){n.initialized&&(n.initialized=!1,e(".ui-clone",this).remove(),n.children.each(function(){void 0!=e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!=e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),n.controls.el&&n.controls.el.remove(),n.controls.next&&n.controls.next.remove(),n.controls.prev&&n.controls.prev.remove(),n.pagerEl&&n.settings.controls&&n.pagerEl.remove(),e(".ui-caption",this).remove(),n.controls.autoEl&&n.controls.autoEl.remove(),clearInterval(n.interval),n.settings.responsive&&e(window).unbind("resize",R))},o.reloadSlider=function(e){void 0!=e&&(s=e),o.destroySlider(),l()},l(),this}}(jQuery)},function(e,t,i){var a=i(15),s={goods_addCart:{sku:"",sph_l:"",sph_r:"",pd:"",cyl_l:"",cyl_r:"",axis_l:"",axis_r:"",refractive_index:1.56},goodsInfo:{},refractiveArr:[1.56,1.6,1.67,1.74],chooseIndex:0};MI.glassBuy=function(e,t){function i(){d(),$(".right_sphType").select(function(e){s.goods_addCart.sph_r=e.data("value"),o()},"右眼"),$(".left_sphType").select(function(e){s.goods_addCart.sph_l=e.data("value"),o()},"左眼"),$(".pd_type").select(function(e){s.goods_addCart.pd=e.data("value")},"瞳距 "),$(".right_cyl_Type").select(function(e){s.goods_addCart.cyl_r=e.data("value"),n(),o()},"右眼"),$(".left_cyl_Type").select(function(e){s.goods_addCart.cyl_l=e.data("value"),n(),o()},"左眼"),$(".right_axis_Type").select(function(e){s.goods_addCart.axis_r=e.data("value")},"右眼轴距 "),$(".left_axis_Type").select(function(e){s.goods_addCart.axis_l=e.data("value")},"左眼轴距 ")}function n(){var e=$(".left_axis_Type"),t=$(".right_axis_Type");0===s.goods_addCart.cyl_l?(e.removeClass("err").addClass("disabled"),e.find(".base-select .choose-item").attr("data-value","").text("请选择左眼轴距"),s.goods_addCart.axis_l=""):e.removeClass("disabled"),0===s.goods_addCart.cyl_r?(t.removeClass("err").addClass("disabled"),t.find(".base-select .choose-item").attr("data-value","").text("请选择右眼轴距"),s.goods_addCart.axis_r=""):t.removeClass("disabled")}function o(){{var e=_.checkBigNum(100*Math.abs(s.goods_addCart.sph_r),100*Math.abs(s.goods_addCart.sph_l)).small,t=_.checkBigNum(100*Math.abs(s.goods_addCart.sph_r),100*Math.abs(s.goods_addCart.sph_l)).big;0===s.goods_addCart.cyl_r&&0===s.goods_addCart.cyl_l}if("0.00"===s.goods_addCart.sph_r&&"0.00"===s.goods_addCart.sph_l){var i=$(".pd_type").find(".base-select .choose-item");$(".pd_type").removeClass("err").addClass("disabled"),i.attr("data-value","").text("请选择瞳距"),s.goods_addCart.pd=""}else $(".pd_type").removeClass("disabled");0===t?s.refractiveArr=[1.56,1.6]:200>=t?s.refractiveArr=[1.56,1.6,1.67]:400>=t?s.refractiveArr=[1.6,1.67]:700>=t?s.refractiveArr=200>=e?[1.67]:[1.67,1.74]:1200>=t&&(s.refractiveArr=400>=e?[]:[1.74]),r()}function r(){for(var e=$(".J_refractive_list").find("li"),t=0;t<s.goodsInfo.length;t++){var i=s.goodsInfo[t].refractive_index;$.inArray(i,s.refractiveArr)<0?e.eq(t).addClass("disabled"):e.eq(t).removeClass("disabled")}$.each(e,function(t,i){return $(i).hasClass("disabled")?(s.chooseIndex=-1,void e.removeClass("active")):($(this).addClass("active").siblings().removeClass("active"),s.chooseIndex=t,s.goods_addCart.refractive_index=s.goodsInfo[s.chooseIndex].refractive_index,!1)}),e.off().on("click",function(e){$(this).hasClass("disabled")||$(this).hasClass("active")||($(this).addClass("active").siblings().removeClass("active"),s.chooseIndex=$(this).data("index"),s.goods_addCart.refractive_index=s.goodsInfo[s.chooseIndex].refractive_index,s.goods_addCart.sku=$(this).data("sku"),d(),e.stopPropagation())}),d()}function d(){-1!==s.chooseIndex?($(".J_modalFooterGlassValue").show(),$(".J_modalFooterGlassValue span").text(s.goodsInfo[s.chooseIndex].price),f.removeClass("btn-disabled").text("加入购物车")):($(".J_modalFooterGlassValue").hide(),f.addClass("btn-disabled").text("无可选镜片规格")),-1!==s.chooseIndex&&(s.goods_addCart.sku=s.goodsInfo[s.chooseIndex].sku)}function l(){f.off().on("click",function(e){if(e.stopPropagation(),!$(this).hasClass("btn-disabled")){var t=""===s.goods_addCart.pd&&("0.00"!==s.goods_addCart.sph_r||"0.00"!==s.goods_addCart.sph_l),i=""===s.goods_addCart.axis_r&&0!==s.goods_addCart.cyl_r,a=""===s.goods_addCart.axis_l&&0!==s.goods_addCart.cyl_l;""===s.goods_addCart.sph_l||""===s.goods_addCart.sph_r||""===s.goods_addCart.cyl_l||""===s.goods_addCart.cyl_r||a||i||t?(""===s.goods_addCart.sph_r&&$(".right_sphType").addClass("err"),""===s.goods_addCart.sph_l&&$(".left_sphType").addClass("err"),t&&$(".pd_type").addClass("err"),""===s.goods_addCart.cyl_r&&$(".right_cyl_Type").addClass("err"),""===s.goods_addCart.cyl_l&&$(".left_cyl_Type").addClass("err"),i&&$(".right_axis_Type").addClass("err"),a&&$(".left_axis_Type").addClass("err")):(m.modal("hide"),v.find(".modal-body").html(g(s)),v.modal("show"),c(),p())}})}function c(){$("#J_GlasschooseBack").off().on("click",function(e){m.modal("show"),v.modal("hide"),e.stopPropagation()})}function p(){$("#J_GlassAddCart").off().on("click",function(e){v.modal("hide"),t(s.goods_addCart,s.goodsInfo[s.chooseIndex].goods_id),e.stopPropagation()})}var h=MI.GLOBAL_CONFIG.orderSite+"/glass/getBuyInfo?goods_id="+e,u=doT.template($("#J_glassrefractiveTmp").html()),g=doT.template($("#J_glasscheckOrderTmp").html()),f=$(".J_modalFooterGlassBtn"),m=$("#J_orderModalGlassBuy"),v=$("#J_orderCheckGlassBuy");a.ajax({url:h,timeout:3e3,error:function(e,t){$(".J_load").html("数据异常，请稍后刷新重试")},callback:function(e){if(1===e.code&&0!==e.data.length){var t=e.data;$(".J_load").hide(),$(".modal-info, .modal-footer").show(),s.goodsInfo=t.refractive_index,_.renderArray($("#right_sphType"),t.sph_min,t.sph_max,t.sph_step,"sph"),_.renderArray($("#left_sphType"),t.sph_min,t.sph_max,t.sph_step,"sph"),_.renderArray($("#pd_type"),t.pd_min,t.pd_max,t.pd_step),_.renderArray($("#right_cyl_Type"),t.cyl_min,t.cyl_max,t.cyl_step,"cyl"),_.renderArray($("#left_cyl_Type"),t.cyl_min,t.cyl_max,t.cyl_step,"cyl"),_.renderArray($("#right_axis_Type"),t.axis_min,t.axis_max,t.axis_step),_.renderArray($("#left_axis_Type"),t.axis_min,t.axis_max,t.axis_step),
$(".J_refractive_list").html(u(_.refractiveSort(t.refractive_index))),i(),r(),l()}else $(".J_load").html("数据异常，请稍后刷新重试")}});var _={renderArray:function(e,t,i,a,s){var n=[];$(e).html(""),"cyl"===s?(n.indexOf("0")<0&&n.push(0),n=n.concat(this.sortDataArr(this.checkBigNum(t,i).small,this.checkBigNum(t,i).big,a))):n=this.sortDataArr(this.checkBigNum(t,i).small,this.checkBigNum(t,i).big,a);for(var o=0;o<n.length;o++)s?("sph"===s&&(0===n[o]?$('<div class="choose-item" data-value="0.00">平光(0.00)</div>').appendTo($(e)):n[o]<0?$('<div class="choose-item" data-value="'+n[o]+'">近视'+100*Math.abs(n[o])+"度("+n[o].toFixed(2)+"）</div>").appendTo($(e)):$('<div class="choose-item" data-value="'+n[o]+'">远视'+100*Math.abs(n[o])+"度("+n[o].toFixed(2)+"）</div>").appendTo($(e))),"cyl"===s&&(0===n[o]?$('<div class="choose-item" data-value= 0>散光(无)</div>').appendTo($(e)):$('<div class="choose-item" data-value='+n[o]+">散光"+100*Math.abs(n[o])+"度("+n[o].toFixed(2)+"）</div>").appendTo($(e)))):$('<div class="choose-item" data-value='+n[o]+">"+n[o]+"</div>").appendTo($(e))},checkBigNum:function(e,t){return{big:e>t?e:t,small:e>t?t:e}},sortDataArr:function(e,t,i){var a=[];if(i){if(0>=t){for(var s=t;s>=e;s-=i)a.push(s);return a}if(e>=0){for(var s=e;t>=s;s+=i)a.push(s);return a}if(0>e&&t>0){for(var n=[],s=e;0>=s;s+=i)n.push(s);for(var s=t;s>0;s-=i)a.push(s);return n.reverse().concat(a.reverse())}}},refractiveSort:function(e){var t=function(e){return function(t,i){var a=t[e],s=i[e];return isNaN(Number(a))||isNaN(Number(s))||(a=Number(a),s=Number(s)),s>a?-1:a>s?1:0}};return e.sort(t("refractive_index"))}};jQuery.fn.select=function(e,t){return this.each(function(){var i=$(this),a=i.find(".select-list > .choose-item");i.off().on("click",function(e){i.removeClass("err"),i.hasClass("disabled")||($(".select-list").removeClass("show zIndex"),$(this).find(".select-list").addClass("show zIndex")),e.stopPropagation()}),a.off().on("click",function(a){var s=$(this);if(!s.hasClass("active")){var n=s.data("value"),o=t+s.text();i.find(".base-select .choose-item").attr("data-value",n).text(o),i.find(".select-list").removeClass("show zIndex"),e&&"function"==typeof e&&e(s,t)}a.stopPropagation()}),$("body").bind("click",function(e){i.find(".select-list").removeClass("show zIndex"),e.stopPropagation()})})}}},function(e,t){var i={proxy:0,ajax:function(e){var t={type:"GET",url:e.url,dataType:"jsonp",jsonp:"jsonpcallback",data:e.data||"",timeout:1e4,error:function(t,i,a){var s={};e.data&&(s=e.data),s.locationHref=window.location.href,s.errorData=t,s.errorType=i,s.error=a,_msq.push(["trackEvent","AJAX_ERROR",encodeURIComponent(e.url),JSON.stringify(s)]);var n=e.error;n&&n(t)},success:function(t){var i=e.callback;i&&i(t)}};e.jsonpCallback&&(t.jsonpCallback=e.jsonpCallback),$.ajax(t)},setProxy:function(e,t){var a=$('<iframe width="0" height="0" name="ihuodong"></iframe>');a.attr("src",t),$("body").append(a),$('iframe[name="ihuodong"]').load(function(){"function"==typeof e&&e(),$('iframe[name="ihuodong"]').remove(),i.proxy=1})},loadImage:function(e){var t=new Image;return t.src=e.data("src"),t.complete?void e.attr("src",t.src).addClass("done"):void(t.onload=function(){e.attr("src",t.src).addClass("done")})}};e.exports=i},function(e,t){var i={isLogin:$.cookie("cUserId")?!0:!1,elm:$("#J_buyBox"),hdUrl:"//a.huodong.mi.com",hdloginUrl:"//i.huodong.mi.com/site/login?redirectUrl="+location.href,staticUrl:MI.GLOBAL_CONFIG.staticSite+"/buySuccess/?gid=",orderapi:window.orderapi_host,orderSite:MI.GLOBAL_CONFIG.orderSite||"//order.mi.com",loginUrl:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/site/login?redirectUrl="+location.href,orderGet:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/product/get",addAddressUrl:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/user/address?redirectUrl="+location.href+"&autoShow=1",addressListUrl:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/address/getAddressList",orderSubmitUrl:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/buyservice/appointmentCreate",bookRule:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/product/bookingRules",couponUrl:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/product/getCommodityActs",orderCount:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/buyservice/appointmentCount",orderDatacheck:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/buyservice/appointmentCheck"};e.exports=i},function(e,t,i){i(13);var a="",s=function(){function e(e,t){var i=$(e),a=i.find(".slider").eq(t);a.hasClass("done")||a.attr("src",a.data("src")).addClass("done")}a&&a.destroySlider();var t=$("#J_sliderView");$(".J_imgload").addClass("hide"),$("#J_img").removeClass("hide"),a=t.slider({infiniteLoop:!0,hideControlOnEnd:!0,mode:"fade",auto:!0,autoHover:!0,onSliderLoad:function(i){e(t,i),$("#J_img").find(".slider").length<=1&&$("#J_img").find(".ui-controls").hide()},onSlideBefore:function(i,a,s){e(t,s)},startSlide:0})};e.exports=s},function(e,t,i){var a=i(16),s=i(15),n=function(e){var t=$.extend(a,e),i=t.buyModule,n=t._config,o=$(".J_setRemind"),r=o.data("type"),d=o.data("name"),l=o.data("tip");l=l?l:"取消到货通知";var c=function(){$(".J_setRemind").replaceWith('<a class="btn btn-gray btn-biglarge J_cancleRemind"  data-type="'+r+'" data-sign="disabled" href="javascript:void(0);"data-name="'+d+'">'+l+"</a>")};$("body").on("click",".J_setRemind",function(){i.checkProSelected(function(){s.ajax({url:t.orderSite+"/misc/onsaleRegister",data:{goods_id:n.id},callback:function(e){1===e.code?(c(),$("#J_setRemindModal").modal("show")):-2===e.code&&(window.location.href=t.loginUrl)}})})}),$("body").on("click",".J_cancleRemind",function(){i.checkProSelected(function(){s.ajax({url:t.orderSite+"/misc/onsaleCleanup",data:{goods_id:n.id},callback:function(e){1===e.code?i.setBtn():-2===e.code&&(window.location.href=t.loginUrl)}})})}),s.ajax({url:t.orderSite+"/misc/onsaleCheck",data:{goods_list:n.id},callback:function(e){1===e.code&&0!==e.data.length&&""!==e.data[n.id]&&c()}})};e.exports=n},function(e,t,i){var a=i(16),s=i(15),n=function(e){var t=e._config;return{config:$.extend(a,e),couponData:[],flowData:[],host:"//a.huodong.mi.com/",getCoupon:function(){var e=this,i=function(e){$("#J_couponModal").find(".list").addClass("hide").end().find(".result").removeClass("hide").find(".con").addClass("hide").end().find(e).removeClass("hide")};$("body").on("click",".J_getCoupon",function(){if(!e.config.isLogin)return void(window.location.href=e.config.hdloginUrl);var t=$(this).data("actcode"),a=$(this).data("drawcode");s.ajax({url:e.host+"activity/draw/draw/antiuid/123",data:{code:t,channel:"pc",activitytype:"draw",drawcode:a},callback:function(e){var t=e.code;return 0===t?void i(".succ"):20006===t||20007===t||20013===t||20014===t?void i(".over"):void i(".fail")}})}),$("body").on("click",".J_getCouponList",function(){return e.config.isLogin?void(t.coupon?e.getCouponList():($("#J_couponModal").modal("show"),t.coupon=!0)):void(window.location.href=e.config.hdloginUrl)}),$("body").on("click",".J_getCouponReturn",function(){e.getCouponList()})},getCouponList:function(e){var a=this,n=$("#J_couponModal"),o=$(".J_couponWrap"),r=i(20);s.ajax({url:a.config.couponUrl+"?commodity_ids="+t.commodityIds.join(","),jsonpcallback:"jsonp1",callback:function(t){if(1===t.code){if(a.couponData=t.data.can_apply_coupons,a.host=t.data.coupon_draw_host,window.flowData=t.data.acts,!window.flowData&&0===a.couponData.length)return void $(".J_saleWrap").addClass("hide");if($(".J_saleWrap").removeClass("hide"),a.couponData&&0!==a.couponData.length){var i=0,d="",l="";for(var c in a.couponData)0===i&&(d=a.couponData[c].name),a.couponData[c].id=c,l+=r(a.couponData[c]),i++;i>1&&(d=d+"等"+i+"种优惠券"),o.removeClass("hide").find(".J_couponName").html(d),n.find(".list").removeClass("hide").end().find(".result").addClass("hide").end().find("ul").html(l).end().find(".no-coupon").remove(),"init"!==e&&n.modal("show")}else o.addClass("hide"),n.find(".list").removeClass("hide").append('<p class="no-coupon">优惠券已经被领光了</p>').end().find(".result").addClass("hide").end().find("ul").html("");t.data.sync_login&&0===s.proxy&&s.setProxy(function(){},t.data.sync_login)}}})},setFlow:function(e){var t=$(".J_flowWrap");if(window.flowData&&window.flowData[e]){var a=i(21);t.removeClass("hide").html(a(window.flowData[e])),$(".J_saleWrap").removeClass("hide")}else t.addClass("hide"),$(".J_couponWrap").hasClass("hide")&&$(".J_saleWrap").addClass("hide")},init:function(){this.getCouponList("init"),this.getCoupon()}}};e.exports=n},function(e,t){e.exports=function(e){function t(e,t){return(10>e?"0"+e:e)+t}function i(e){var i=new Date(1e3*parseInt(e));return Y=i.getFullYear()+"-",month=i.getMonth(),M=t(i.getMonth()+1,"-"),D=t(i.getDate(),"  "),h=t(i.getHours(),":"),m=t(i.getMinutes(),":"),s=t(i.getSeconds(),""),Y+M+D+h+m+s}var a='<li> <div class="coupon-price"> <sup>￥</sup>'+e.money+' </div> <div class="coupon-con"> <p class="coupon-txt">使用范围：'+e.range_desc+"</p> ";return a+=' <p class="coupon-time">'+i(e.event_start_time)+" 到 "+i(e.event_end_time)+' 领取</p> <a href="javascript:void(0);" class="J_getCoupon" data-actcode="'+e.event_act_code+'" data-drawcode="'+e.event_draw_code+'">立即领取</a> </div></li>'}},function(e,t){e.exports=function(e){var t="<ul> ";for(var i in e)t+=' <li> <span class="flow-tag">'+e[i].typeDesc+'</span> <span class="flow-name">'+e[i].title+"</span> </li> ";return t+="</ul>"}},function(e,t,i){var a=i(16),s=i(15),n=function(e){var t=e._config;return{item:4,curCount:1,totlePage:1,config:$.extend(a,e),setOrder:function(){var e=this,a=$("#J_orderModal"),n={goods_id:t.id,appointment_batch:t.subscribe.batch_key,activity_code:t.subscribe.activity_code};e.config.need_address&&(n.address_id=t.orderAddressId),s.ajax({url:e.config.orderSubmitUrl,data:n,callback:function(s){return-1===s.code?void(window.location.href=e.config.loginUrl):void(1===s.code?(a.modal("hide"),1===s.data.status&&($("#J_orderModalSucc").modal("show"),s.data.prize&&setTimeout(function(){$("#J_orderModalSucc").modal("hide");var e=i(23);$("#J_orderPrize").modal("show").find(".modal-body").html(e(s.data.prize))})),2===s.data.status&&MI.alert({msg:"已预约",isConfirm:!1}),$(".J_proBuyBtn").addClass("btn-disabled").html("已预约").removeClass("J_proBuyBtn"),t.orderData[t.id]=!0):a.find(".J_msg").html(s.msg))}})},orderAddress:function(){var e=this,i=$("#J_orderModal");$("body").on("click","#J_orderModal li",function(){t.orderAddressId=$(this).data("id"),$(this).addClass("active").siblings().removeClass("active"),i.find(".J_msg").html("")}),$("body").on("click",".J_orderSent",function(){return t.orderAddressId?void e.setOrder():void i.find(".J_msg").html("请选择一个预约地址")}),$("body").on("click",".J_next",function(){return e.curCount++,e.curCount>e.totlePage?void(e.curCount=e.totlePage):void e.formatAddress()}),$("body").on("click",".J_prev",function(){return e.curCount--,e.curCount<=0?void(e.curCount=1):void e.formatAddress()})},formatAddress:function(){var e={href:this.config.addAddressUrl,item:this.item,curCount:this.curCount,totlePage:this.totlePage,data:this.data};$("#J_orderModal").modal("show").find(".modal-body").html(this.tmp(e))},getAddresslist:function(){var e=this;s.ajax({url:e.config.addressListUrl,callback:function(t){if(1===t.code)e.data=t.data,console.log(e.data.length,e.item),e.totlePage=Math.ceil(e.data.length/e.item),e.formatAddress();else{if(-2===t.code)return void(location.href=e.config.loginUrl);MI.alert({msg:t.msg,isConfirm:!1})}}})},getCount:function(){s.ajax({url:this.config.orderCount,data:{goods_id_list:t.id,appointment_batch:t.subscribe.batch_key},callback:function(e){1===e.code&&e.data.count>t.subscribe.display_threshold&&$(".J_orderCount").removeClass("hide").html(e.data.count+"人 已预约")}})},init:function(){this.config.need_address?(this.orderAddress(),this.tmp=i(24),this.getAddresslist()):this.setOrder()}}};e.exports=n},function(e,t){e.exports=function(e){var t="";return e.prize_img?(t+='<div class="prize-bg"> <a class="close" data-dismiss="modal"></a> <h3>恭喜你！获得'+e.prize_name+'</h3> <img src="'+e.prize_img+'" alt=""> <p>'+e.prize_info+"</p> ",1==e.prize_type&&(t+=' <a href="'+MI.GLOBAL_CONFIG.orderSite+'/user/coupon/">查看我的奖励 &gt; </a> '),t+=" ",11==e.prize_type&&(t+=' <a href="'+MI.GLOBAL_CONFIG.orderSite+'/invite/list/">查看我的奖励 &gt; </a> '),t+=" ",18==e.prize_type&&(t+=' <a href="//redpack.pay.xiaomi.com/redPackage/wap/new/hongbao">查看我的奖励 &gt; </a> '),t+="</div>"):(t+='<div class="prize-mitu"> <a class="close" data-dismiss="modal"><i class="iconfont">&#xe602;</i></a> <img src="//i1.mifile.cn/f/i/17/static/mitu.png" alt=""> <h3>恭喜你！获得'+e.prize_name+"</h3> <p>"+e.prize_info+"</p> ",1==e.prize_type&&(t+=' <a href="'+MI.GLOBAL_CONFIG.orderSite+'/user/coupon/">查看我的奖励 &gt; </a> '),t+=" ",11==e.prize_type&&(t+=' <a href="'+MI.GLOBAL_CONFIG.orderSite+'/invite/list/">查看我的奖励 &gt; </a> '),t+=" ",18==e.prize_type&&(t+=' <a href="//redpack.pay.xiaomi.com/redPackage/wap/new/hongbao">查看我的奖励 &gt; </a> '),t+="</div>"),t}},function(e,t){e.exports=function(e){var t='<div class="modal-title"> 选择预约信息 ';if(e.data.length>0&&(t+=' <a href="'+e.href+'">+ 添加新地址</a> '),t+="</div>",0===e.data.length)t+=' <img src="http://i1.mifile.cn/f/i/17/static/no_address.jpg"> <a href="'+e.href+'" class="btn btn-primary btn-biglarge">添加新地址</a>';else{var i=e.data.slice((e.curCount-1)*e.item,e.data.length>e.item?e.curCount*e.item:e.data.length);t+='<ul class="clearfix"> ';var a=i;if(a)for(var s,n=-1,o=a.length-1;o>n;)s=a[n+=1],t+=' <li data-id="'+s.address_id+'"> <div class="address-title"> <span class="item">'+s.consignee+'</span> <span class="item">'+s.city.name+'</span> </div> <div class="address-desc">'+s.city.name+s.district.name+s.area.name+" </div> </li> ";t+="</ul>",e.data.length>e.item&&(t+='<div class="xm-controls xm-controls-small" '+e.data.length+'> <a class="control control-prev iconfont J_prev" href="javascript: void(0);">&#xe628;</a> <span>'+e.curCount+"</span> / "+e.totlePage+' <a class="control control-next iconfont J_next" href="javascript: void(0);">&#xe623;</a></div>'),t+='<a href="javascript:void(0);" class="btn btn-primary btn-biglarge J_orderSent">确定</a><p class="error J_msg"></p>'}return t}},function(e,t){e.exports=function(e){var t="<ul > ",i=0;t+=" ",""!==e.product&&(t+=" <li>"+e.product.name+" ",parseFloat(e.product.market_price)>parseFloat(e.product.price)&&(t+=" <del>"+parseFloat(e.product.market_price)+"元</del> "),t+=" <span>  "+parseFloat(e.product.price)+"元</span> </li> ","booking"===e.type?(t+=" ",i+=parseFloat(e.bookPrice),t+=" "):(t+=" ",i+=parseFloat(e.product.price),t+=" "),t+=" "),t+=" ";for(var a in e.services){t+=" ";for(var s in e.services[a])t+=" <li>"+e.services[a][s].name+" ",parseFloat(e.services[a][s].oriprice)>parseFloat(e.services[a][s].price)&&(t+=" <del>  "+parseFloat(e.services[a][s].oriprice)+"元</del> "),t+=" <span>"+parseFloat(e.services[a][s].price)+"元</span> </li> ",i+=parseFloat(e.services[a][s].price),t+=" ";t+=" "}if(t+=" ",null!==e.mitvMember&&(t+=" <li>"+e.mitvMember.name+" <span>"+e.mitvMember.price+"</span> </li> ",i+=parseFloat(e.mitvMember.price),t+=" "),t+=" ",e.parts.length>0){t+=" ";var n=e.parts;if(n)for(var o,r=-1,d=n.length-1;d>r;)o=n[r+=1],t+=" <li>"+o.name+" <span>"+o.price+"</span> </li> ",i+=parseFloat(o.price),t+=" ";t+=" "}return t+=' <li class="totlePrice"> ',t+="booking"===e.type?" 预付款 ":" 总计 ",t+=" ："+i+"元 ",e.product.shipment_text&&(t+=" <em>("+e.product.shipment_text+")</em> "),t+=" </li></ul>"}},function(e,t){e.exports=function(e){var t="",i=e;if(i)for(var a,s=-1,n=i.length-1;n>s;){a=i[s+=1];var o=a.service_info;if(o){t+='<div class="pro-choose list-choose list-choose-small hide J_service" data-index="'+s+'" data-multi="'+a.can_multi+'"> <div class="step-title"> 选择小米提供的'+a.type_name+' <a  href="'+a.type_url+'" target="_blank" >了解'+a.type_name+" &gt;</a> </div> <ul> ";var r=o;if(r)for(var d,l=-1,c=r.length-1;c>l;){if(d=r[l+=1],t+=' <li data-oriprice="'+d.service_price+'" ',t+=parseFloat(d.act_diff)>0?' data-price="'+d.act_price+'" ':' data-price="'+d.service_price+'" ',t+=' data-name="'+d.service_short_name+'" data-bargain_id="'+d.bargain_id+'" data-id="'+d.service_goods_id+'" data-source="'+d.source+'"> <i class="iconfont icon-checkbox" ><em>√</em></i> <img src="'+d.service_image+'?width=50&height=50" > <div> <span class="name"> '+d.service_short_name+" ",parseFloat(d.act_diff)&&(t+=" <em>省"+parseFloat(d.act_diff)+"元</em> "),t+=' </span> <p class="desc">'+d.service_name+"</p> ",d.phone_accidentIns){t+=' <p class="agreement"> <i class="iconfont icon-checkbox J_read"><em>√</em></i> 我已阅读 ';var p=d.phone_accidentIns;if(p)for(var h,u=-1,g=p.length-1;g>u;)h=p[u+=1],t+=' <a href="'+h.url+'" target="_blank">'+h.desc,u!=d.phone_accidentIns.length-1&&(t+="<span>|</span>"),t+="</a> ";t+=" </p> "}t+=' <span class="price"> ',t+=parseFloat(d.act_diff)>0?" "+parseFloat(d.act_price)+"元 <del>"+parseFloat(d.service_price)+"元</del> ":" "+parseFloat(d.service_price)+"元 ",t+=" </span> </div> </li> "}t+=" </ul></div>"}}return t}},function(e,t){e.exports=function(e){var t="";if(e.goods&&e.goods.action){t+=" ";var i=e.goods.action;t+=" ","bigtap"===i.type||"presales"===i.type||"booking"===i.type?(t+=" ",e.stock&&e.stock[e.goods.goods_id]?(t+=" ",i.isBigtap?(t+=" ",1===e.stock[e.goods.goods_id].hdstatus?(t+=" ",t+=i.check_login&&!e.isLogin?' <li> <a href="'+e.href+'" class="btn btn-primary btn-biglarge" data-type="'+i.type+'" data-isbigtap="'+i.isBigtap+'">登录后购买</a> </li> ':' <li class="countdown" data-name="'+i.name+'"> <a data-type="'+i.type+'" data-tip="'+i.next_sale_tip+'" class="btn btn-line-primary btn-biglarge J_setRemind" href="javascript:void(0);">到货通知</a> </li> ',t+=" "):(t+=" ",2===e.stock[e.goods.goods_id].hdstatus?(t+=" ",i.check_login&&!e.isLogin?t+=' <li> <a href="'+e.href+'" class="btn btn-primary btn-biglarge" data-type="'+i.type+'" data-isbigtap="'+i.isBigtap+'">登录后购买</a> </li> ':(t+=" ",t+="presales"===i.type?' <li> <a href="javascript:void(0);" class="btn btn-primary  btn-biglarge J_proBuyBtn" id="J_proAddcart" data-type="'+i.type+'" data-isbigtap="'+i.isBigtap+'" data-name="'+i.name+'">'+i.name+'</a> <div class="J_hasChange">全款预售，商品到货后按照预购顺序发货 <a href="#J_rulePresales" data-toggle=\'modal\'>了解详情</a></div> </li> ':' <li> <a href="javascript:void(0);" class="btn btn-primary btn-biglarge J_proBuyBtn" id="J_proAddcart" data-type="'+i.type+'" data-isbigtap="'+i.isBigtap+'" data-name="'+i.name+'">'+i.name+"</a> </li> ",t+=" "),t+=" "):t+=' <li> <a data-sign="disabled" data-type="'+i.type+'" data-tip="'+i.next_sale_tip+'" class="btn btn-disabled btn-biglarge " href="javascript:void(0);" data-isbigtap="'+i.isBigtap+'" data-name="'+i.name+'">暂时缺货</a> </li> ',t+=" "),t+=" "):(t+=" ",i.check_login&&!e.isLogin?t+=' <li> <a href="'+e.href+'" class="btn btn-primary btn-biglarge" data-isbigtap="'+i.isBigtap+'" data-type="'+i.type+'" data-name="'+i.name+'">登录后购买</a> </li> ':(t+=" ",t+="presales"===i.type?' <li> <a href="javascript:void(0);" class="btn btn-primary  btn-biglarge J_proBuyBtn" id="J_proAddcart" data-type="'+i.type+'" data-isbigtap="'+i.isBigtap+'" data-name="'+i.name+'">'+i.name+'</a> <div class="J_hasChange">全款预售，商品到货后按照预购顺序发货 <a href="#J_rulePresales" data-toggle=\'modal\'>了解详情</a></div> </li> ':' <li> <a href="javascript:void(0);" class="btn btn-primary btn-biglarge J_proBuyBtn" id="J_proAddcart" data-type="'+i.type+'" data-isbigtap="'+i.isBigtap+'" data-name="'+i.name+'">'+i.name+"</a> </li> ",t+=" "),t+=" "),t+=" "):(t+=" ",t+=i.isBigtap?' <li> <a  data-sign="disabled" data-type="'+i.type+'" data-tip="'+i.next_sale_tip+'" class="btn btn-disabled btn-biglarge" href="javascript:void(0);" data-isbigtap="'+i.isBigtap+'" data-name="'+i.name+'" >暂时缺货</a> </li> ':' <li> <a  data-sign="disabled" data-type="'+i.type+'" data-tip="'+i.next_sale_tip+'" class="btn btn-line-primary btn-biglarge J_setRemind" href="javascript:void(0);" data-isbigtap="'+i.isBigtap+'" data-name="'+i.name+'" >到货通知</a> </li> ',t+=" "),t+=" "):(t+=" ","subscribe"===i.type||"reserve"===i.type?(t+=" ",i.check_login&&!e.isLogin?t+=' <li> <a href="'+e.href+'" class="btn btn-primary btn-biglarge" data-isbigtap="'+i.isBigtap+'">登录后预约</a> </li> ':(t+=" ",e.isAllGoodsBooking?t+=' <li> <a href="javascript:void(0);" class="btn btn-disabled btn-biglarge" data-type="'+i.type+'" data-name="立即预约">立即预约</a> </li> ':(t+=" ",t+=i.has_reserved?' <li> <a href="javascript:void(0);" class="btn btn-disabled btn-biglarge" >已预约</a> </li> ':' <li> <a href="javascript:void(0);" class="btn btn-primary btn-biglarge J_proBuyBtn" data-type="'+i.type+'" data-name="'+i.name+'">'+i.name+"</a> </li> ",t+=" "),t+=" "),t+=" "):(t+=" ","common"===i.type||"glass"===i.type?(t+=" ",e.stock?(t+=" ",t+=e.stock[e.goods.goods_id]?' <li> <a href="javascript:void(0);" class="btn btn-primary btn-biglarge J_proBuyBtn" data-type="'+i.type+'" data-name="'+i.name+'">'+i.name+"</a> </li> ":' <li> <a data-type="'+i.type+'" data-sign="disabled" data-tip="'+i.next_sale_tip+'" class="btn btn-line-primary btn-biglarge J_setRemind disabled" href="javascript:void(0);" data-name="'+i.name+'">到货通知</a> </li> ',t+=" "):t+=' <li> <a data-type="'+i.type+'" data-sign="disabled" data-tip="'+i.next_sale_tip+'" class="btn btn-line-primary btn-biglarge J_setRemind disabled" href="javascript:void(0);" data-name="'+i.name+'">到货通知</a> </li> ',t+=" "):(t+=" <li> ",t+=i.path?' <a href="'+i.path+'" target="_blank" data-type="'+i.type+'" data-sign="disabled" class="btn btn-primary btn-biglarge" data-name="'+i.name+'">'+i.name+"</a> ":' <a href="javascript:void(0);" data-type="'+i.type+'" data-sign="disabled" class="btn btn-gray btn-biglarge btn-disabled" data-name="'+i.name+'">'+i.name+"</a> ",t+=" </li> "),t+=" "),t+=" ")}else t+='<li> <a data-sign="disabled" data-tip="'+i.next_sale_tip+'" class="btn btn-line-primary btn-biglarge J_setRemind" href="javascript:void(0);">到货通知</a> </li>';return t+="<li> ",t+=e.isLogin?' <a href="javascript:void(0);" class="btn-gray btn-like btn-biglarge" id="J_like"> <i class="iconfont default">&#xe62d;</i> <i class="iconfont red">&#xe62e;<i class="iconfont red J_redCopy">&#xe62e;</i></i> 喜欢 </a> ':' <a href="'+e.href+'" class="btn-gray btn-like btn-biglarge" > <i class="iconfont default">&#xe62d;</i>喜欢 </a> ',t+=" </li>"}},function(e,t){e.exports=function(e){var t="";if(e&&e.list){t+=e.url&&""!=e.url?'<!-- <a href="'+e.url+'" target="_blank" class="hover"> --><a href="javascript:void(0);">':'<a href="javascript:void(0);" >',t+=" ";var i=e.list;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],t+=' <span class="',a.is_support&&(t+="support"),t+='"> ',t+=a.is_support?' <i class="iconfont" >&#xe618;</i> ':' <i class="iconfont">&#xe90c;</i> ',t+=" <em>"+a.item_name+"</em> </span> ";t+="</a>"}return t}},function(e,t){e.exports=function(e){var t='<div class="infor-con"> ',i=e.tab_content;if(i)for(var a,s=-1,n=i.length-1;n>s;){if(a=i[s+=1],t+=' <div class="section"> <div class="container"> ',"plain_view"===a.view_type&&a.plain_view.img&&(t+=" ",a.plain_view.title&&(t+=" <h3>"+a.plain_view.title+" ",a.plain_view.link_title&&(t+=' <a href="'+a.plain_view.link_url+'" target="_blank">'+a.plain_view.link_title+' <i class="iconfont">&#xe624;</i></a> '),t+=" </h3> "),t+=' <div class="con"><img data-src="'+a.plain_view.img+'" class="slider"></div> '),t+=" ","text_view"===a.view_type&&(t+=" ",a.text_view.title&&(t+=" <h3>"+a.text_view.title+" ",a.text_view.link_title&&(t+=' <a href="'+a.text_view.link_url+'" target="_blank">'+a.text_view.link_title+' <i class="iconfont">&#xe624;</i></a> '),t+=" </h3> "),t+=" ",a.text_view.des&&(t+=' <div class="con con-text "><div class="J_markdown" data-desc="'+a.text_view.desc+'"></div></div> '),t+=" "),t+=" ","gallery_view"===a.view_type){t+=' <div class="con"> <div class="imgbox J_imgBox"> ';var o=a.plain_view;if(o)for(var r,s=-1,d=o.length-1;d>s;)r=o[s+=1],t+=' <img data-src="'+r+'" class="slider"> ';t+=" </div> </div> "}t+=" </div> </div> "}return t+="</div>"}}]);